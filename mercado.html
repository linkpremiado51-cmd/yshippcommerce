<!DOCTYPE html>
<!--
  Essa linha diz ao navegador que este é um documento HTML5.
  O HTML5 é a versão mais moderna da linguagem usada para criar páginas da web.
  Isso ajuda o navegador a entender como exibir corretamente o conteúdo.
-->
<html lang="pt-BR">
<!--
  Define que o idioma principal da página é o Português do Brasil.
  Isso ajuda motores de busca e navegadores a entenderem o público-alvo.
-->

<head>
  <!--
    A seção <head> contém informações importantes sobre a página,
    mas que não são exibidas diretamente para o usuário.
  -->

  <meta charset="UTF-8">
  <!--
    Define a codificação de caracteres como UTF-8.
    Isso permite que a página exiba acentos, emojis e caracteres especiais corretamente.
  -->

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!--
    Essa linha faz com que a página se adapte automaticamente ao tamanho da tela do dispositivo (celular, tablet, computador).
    Isso melhora a experiência do usuário em dispositivos móveis.
  -->

  <meta name="description" content="Centro de Comando - YshippCommerce">
  <!--
    Descrição da página que aparece nos resultados de busca do Google.
    Ajuda os usuários a entenderem do que se trata a página antes de clicar.
  -->

  <title>Centro de Comando - YshippCommerce</title>
  <!--
    Título que aparece na aba do navegador.
    É importante para identificação e também para SEO (otimização para motores de busca).
  -->

  <!--
    Importa a fonte 'Inter' do Google Fonts.
    Fontes personalizadas tornam o design mais profissional e atraente.
  -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!--
    Importa ícones do Font Awesome.
    Essa biblioteca permite usar ícones prontos (como ícones de usuário, notificação, etc.) sem precisar criar do zero.
  -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!--
    Importa o Tailwind CSS, uma biblioteca que facilita a criação de designs responsivos e modernos.
    Ela fornece classes prontas para estilizar elementos rapidamente.
  -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /*
      ===== Variáveis de Cores e Estilos =====
      Aqui são definidas as cores e estilos que serão reutilizados em toda a página.
      Isso facilita a manutenção e garante consistência visual.
    */
    :root {
      --background: #f5f7fa; /* Cor de fundo principal da página */
      --surface: #ffffff; /* Cor de superfícies, como cards e menus */
      --text-primary: #1a202c; /* Cor principal do texto */
      --text-secondary: #4a5568; /* Cor secundária do texto, menos chamada */
      --primary: #2d3748; /* Cor principal de destaque, usada em botões e hover */
      --primary-hover: #1a202c; /* Cor quando o mouse passa por cima de um elemento */
      --secondary: #3182ce; /* Cor secundária de destaque, como azul */
      --secondary-hover: #2b6cb0; /* Cor secundária quando o mouse passa por cima */
      --border: #e2e8f0; /* Cor padrão das bordas */
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.1); /* Sombra leve para dar profundidade aos elementos */
      --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15); /* Sombra maior para elementos destacados */
      --accent: #e53e3e; /* Cor de alerta ou destaque, como vermelho */
      --gold: #d69e2e; /* Cor dourada, usada para moedas ou destaques */
      --progress-bg: #edf2f7; /* Cor de fundo para barras de progresso */
    }

    /*
      ===== Tema Escuro =====
      Define como a página ficará se o usuário ativar o modo escuro.
      Isso melhora a acessibilidade e reduz a fadiga visual em ambientes com pouca luz.
    */
    [data-theme="dark"] {
      --background: #1a202c; /* Fundo escuro */
      --surface: #2d3748; /* Superfícies escuras */
      --text-primary: #e2e8f0; /* Texto claro */
      --text-secondary: #a0aec0; /* Texto secundário claro */
      --border: #4a5568; /* Bordas escuras */
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.3); /* Sombra mais forte para o tema escuro */
      --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.4);
      --accent: #f56565; /* Cor de alerta para o tema escuro */
      --progress-bg: #4a5568; /* Fundo de progresso escuro */
    }

    /*
      ===== Reset Básico de CSS =====
      Remove margens e preenchimentos padrão dos elementos para ter mais controle sobre o design.
    */
    * {
      margin: 0; /* Remove margens padrão */
      padding: 0; /* Remove preenchimentos padrão */
      box-sizing: border-box; /* Faz com que largura e altura incluam bordas e preenchimentos */
      user-select: none; /* Evita que o usuário selecione texto acidentalmente */
      -webkit-user-select: none; /* Garante compatibilidade com o navegador Safari */
    }

    /*
      ===== Estilo do Corpo da Página =====
      Define a aparência geral da página.
    */
    body {
      font-family: 'Inter', sans-serif; /* Define a fonte principal como 'Inter' */
      background: var(--background); /* Usa a cor de fundo definida nas variáveis */
      color: var(--text-primary); /* Define a cor principal do texto */
      line-height: 1.5; /* Espaçamento entre linhas para melhor legibilidade */
      min-height: 100vh; /* Garante que a página ocupe pelo menos a altura total da tela */
      padding-top: 60px; /* Espaço reservado para o cabeçalho fixo */
      overflow-x: hidden; /* Evita que apareça uma barra de rolagem horizontal */
    }

    /*
      ===== Cabeçalho =====
      O cabeçalho é a parte superior da página, onde fica o título e os ícones de ação.
    */
    .header {
      position: fixed; /* Fixa o cabeçalho no topo da página */
      top: 0; /* Posiciona no topo */
      left: 0; /* Alinha à esquerda */
      right: 0; /* Alinha à direita */
      height: 60px; /* Altura do cabeçalho */
      background: var(--surface); /* Cor de fundo do cabeçalho */
      border-bottom: 1px solid var(--border); /* Linha inferior para separar do conteúdo */
      display: flex; /* Usa flexbox para organizar os elementos horizontalmente */
      justify-content: space-between; /* Espaça os elementos */
      align-items: center; /* Centraliza verticalmente */
      padding: 0 16px; /* Espaçamento interno horizontal */
      z-index: 1001; /* Garante que fique acima de outros elementos */
      box-shadow: var(--shadow); /* Adiciona uma sombra leve para dar profundidade */
    }

    /*
      ===== Título do Cabeçalho =====
      Estiliza o título que aparece no cabeçalho.
    */
    .header h1 {
      font-size: 1.125rem; /* Tamanho da fonte */
      font-weight: 600; /* Espessura da fonte (negrito médio) */
      display: flex; /* Usa flexbox para alinhar ícone e texto */
      align-items: center; /* Centraliza verticalmente */
      gap: 0.5rem; /* Espaço entre o ícone e o texto */
    }

    /*
      ===== Ícone dentro do Título =====
      Estiliza o ícone que aparece ao lado do título.
    */
    .header h1 i {
      color: var(--primary); /* Cor do ícone */
    }

    /*
      ===== Seções da Barra Superior =====
      Organiza os elementos da barra superior (como ícones de notificação, perfil, etc.).
    */
    .top-bar__section {
      display: flex; /* Organiza os itens horizontalmente */
      align-items: center; /* Centraliza verticalmente */
      gap: 12px; /* Espaço entre os itens */
    }

    /*
      ===== Ícones de Ação da Barra Superior =====
      Estiliza os ícones clicáveis da barra superior.
    */
    .top-bar__icon {
      color: var(--text-primary); /* Cor do ícone */
      background: none; /* Sem fundo */
      border: none; /* Sem borda */
      padding: 8px; /* Espaçamento interno */
      border-radius: 4px; /* Cantos arredondados */
      cursor: pointer; /* Muda o cursor para indicar que é clicável */
      transition: background-color 0.2s ease; /* Animação suave ao passar o mouse */
    }

    /*
      ===== Tamanho do Ícone =====
      Define o tamanho dos ícones.
    */
    .top-bar__icon i {
      font-size: 1.125rem; /* Tamanho do ícone */
    }

    /*
      ===== Efeito de Hover nos Ícones =====
      Define o que acontece quando o mouse passa por cima de um ícone.
    */
    .top-bar__icon:hover {
      background: var(--primary); /* Muda a cor de fundo */
      color: white; /* Muda a cor do ícone para branco */
    }

    /*
      ===== Menu Lateral =====
      O menu lateral é uma barra que aparece do lado esquerdo da tela.
    */
    .menu {
      position: fixed; /* Fixa o menu na tela */
      top: 60px; /* Posiciona abaixo do cabeçalho */
      left: 0; /* Alinha à esquerda */
      width: 240px; /* Largura do menu */
      height: calc(100vh - 60px); /* Altura total da tela menos o cabeçalho */
      background: var(--surface); /* Cor de fundo do menu */
      border-right: 1px solid var(--border); /* Linha à direita para separar do conteúdo */
      transform: translateX(-100%); /* Inicialmente escondido à esquerda */
      transition: transform 0.3s ease; /* Animação suave ao abrir/fechar */
      z-index: 1000; /* Garante que fique acima de outros elementos */
      overflow-y: auto; /* Permite rolagem vertical se necessário */
      box-shadow: var(--shadow); /* Sombra leve */
    }

    /*
      ===== Menu Aberto =====
      Define como o menu fica quando está aberto.
    */
    .menu.open {
      transform: translateX(0); /* Move o menu para a posição visível */
    }

    /*
      ===== Lista do Menu =====
      Estiliza a lista de itens dentro do menu.
    */
    .menu__list {
      list-style: none; /* Remove os marcadores padrão da lista */
      padding: 12px 0; /* Espaçamento vertical */
    }

    /*
      ===== Item do Menu =====
      Estiliza cada item da lista do menu.
    */
    .menu__item {
      margin: 4px 12px; /* Espaçamento entre os itens */
    }

    /*
      ===== Link do Menu =====
      Estiliza os links clicáveis dentro do menu.
    */
    .menu__link {
      color: var(--text-primary); /* Cor do link */
      text-decoration: none; /* Remove o sublinhado padrão */
      padding: 8px 12px; /* Espaçamento interno */
      display: flex; /* Usa flexbox para alinhar ícone e texto */
      align-items: center; /* Centraliza verticalmente */
      border-radius: 4px; /* Cantos arredondados */
      transition: background 0.2s ease; /* Animação suave ao passar o mouse */
      background: transparent; /* Fundo transparente inicialmente */
    }

    /*
      ===== Efeito de Hover no Link do Menu =====
      Define o que acontece quando o mouse passa por cima de um link do menu.
    */
    .menu__link:hover {
      background: var(--primary); /* Muda a cor de fundo */
      color: white; /* Muda a cor do texto para branco */
    }

    /*
      ===== Ícone do Link do Menu =====
      Estiliza o ícone que aparece ao lado do texto do link.
    */
    .menu__link i {
      margin-right: 8px; /* Espaço entre o ícone e o texto */
      font-size: 1.125rem; /* Tamanho do ícone */
      color: var(--text-secondary); /* Cor do ícone */
      transition: color 0.2s ease; /* Animação suave ao mudar a cor */
    }

    /*
      ===== Efeito de Hover no Ícone do Link =====
      Define o que acontece com o ícone quando o mouse passa por cima do link.
    */
    .menu__link:hover i {
      color: white; /* Muda a cor do ícone para branco */
    }

    /*
      ===== Botão Premium =====
      Estiliza o botão que oferece a versão premium do serviço.
    */
    .premium-button {
      background: var(--secondary); /* Cor de fundo azul */
      color: white; /* Texto branco */
      border: none; /* Sem borda */
      padding: 8px 16px; /* Espaçamento interno */
      border-radius: 4px; /* Cantos arredondados */
      cursor: pointer; /* Muda o cursor para indicar que é clicável */
      width: calc(100% - 24px); /* Preenche quase toda a largura do menu */
      margin: 12px; /* Margem interna */
      font-weight: 500; /* Espessura da fonte */
      transition: background 0.2s ease; /* Animação suave ao passar o mouse */
    }

    /*
      ===== Efeito de Hover no Botão Premium =====
      Define o que acontece quando o mouse passa por cima do botão premium.
    */
    .premium-button:hover {
      background: var(--secondary-hover); /* Cor de fundo mais escura */
    }

    /*
      ===== Notificações =====
      Estiliza as notificações que aparecem na tela.
    */
    .notification {
      position: fixed; /* Fixa a notificação na tela */
      bottom: 16px; /* Distância do rodapé */
      right: 16px; /* Distância da direita */
      padding: 8px 16px; /* Espaçamento interno */
      background: var(--surface); /* Cor de fundo */
      color: var(--text-primary); /* Cor do texto */
      border-radius: 4px; /* Cantos arredondados */
      box-shadow: var(--shadow-lg); /* Sombra para dar destaque */
      opacity: 0; /* Inicialmente invisível */
      transform: translateY(16px); /* Leve deslocamento para animação */
      transition: opacity 0.3s ease, transform 0.3s ease; /* Animação suave */
      z-index: 2000; /* Garante que fique acima de quase tudo */
    }

    /*
      ===== Notificação Visível =====
      Define como a notificação fica quando está visível.
    */
    .notification.show {
      opacity: 1; /* Aparece */
      transform: translateY(0); /* Volta à posição normal */
    }

    /*
      ===== Seções do Dashboard =====
      Estiliza as seções que organizam o conteúdo principal da página.
    */
    .dashboard-section {
      width: 100%; /* Largura total */
      max-width: 1000px; /* Limite de largura para não ficar muito largo */
      padding: 1rem; /* Espaçamento interno */
      background: var(--surface); /* Cor de fundo */
      border-radius: 8px; /* Cantos arredondados */
      box-shadow: var(--shadow); /* Sombra leve */
      margin: 1rem auto; /* Centraliza e dá margem vertical */
      border: 1px solid var(--border); /* Borda fina */
    }

    /*
      ===== Título da Seção do Dashboard =====
      Estiliza o título de cada seção do dashboard.
    */
    .dashboard-section h2 {
      font-size: 1.25rem; /* Tamanho da fonte */
      font-weight: 600; /* Espessura da fonte */
      margin-bottom: 0.75rem; /* Espaçamento inferior */
      color: var(--text-primary); /* Cor do texto */
      display: flex; /* Usa flexbox para alinhar ícone e texto */
      align-items: center; /* Centraliza verticalmente */
      gap: 0.5rem; /* Espaço entre ícone e texto */
    }

    /*
      ===== Ícone do Título da Seção =====
      Estiliza o ícone que aparece ao lado do título da seção.
    */
    .dashboard-section h2 i {
      color: var(--secondary); /* Cor azul */
    }

    /*
      ===== Carrossel =====
      O carrossel permite deslizar entre cards horizontalmente.
    */
    .carousel-container {
      position: relative; /* Permite posicionar elementos filhos em relação a este */
      width: 100%; /* Largura total */
      overflow: hidden; /* Esconde o que ultrapassa a largura */
      margin-top: 0.75rem; /* Margem superior */
    }

    /*
      ===== Estrutura do Carrossel =====
      Organiza os cards em uma linha horizontal.
    */
    .carousel {
      display: flex; /* Organiza os cards em linha */
      transition: transform 0.5s ease; /* Animação suave ao deslizar */
      width: 100%; /* Largura total */
      gap: 0.75rem; /* Espaço entre os cards */
      touch-action: pan-x; /* Permite deslizar com o dedo em dispositivos touch */
    }

    /*
      ===== Card do Carrossel =====
      Define como cada card se comporta dentro do carrossel.
    */
    .carousel .nav-card {
      flex: 0 0 100%; /* Cada card ocupa 100% da largura */
      min-width: 100%; /* Largura mínima */
      max-width: 100%; /* Largura máxima */
    }

    /*
      ===== Cartões de Navegação =====
      Estiliza os cards que aparecem no dashboard.
    */
    .nav-card {
      background: var(--surface); /* Cor de fundo */
      border-radius: 8px; /* Cantos arredondados */
      padding: 1rem; /* Espaçamento interno */
      box-shadow: var(--shadow); /* Sombra leve */
      transition: transform 0.2s ease, box-shadow 0.2s ease; /* Animação suave */
      border: 1px solid var(--border); /* Borda fina */
      text-align: center; /* Centraliza o texto */
      position: relative; /* Permite posicionar elementos filhos em relação a este */
    }

    /*
      ===== Efeito de Hover no Cartão =====
      Define o que acontece quando o mouse passa por cima de um card.
    */
    .nav-card:hover {
      transform: translateY(-3px); /* Efeito de "flutuação" */
      box-shadow: var(--shadow-lg); /* Sombra maior */
    }

    /*
      ===== Ícone do Cartão =====
      Estiliza o ícone que aparece dentro do card.
    */
    .nav-card i {
      font-size: 2rem; /* Tamanho do ícone */
      margin-bottom: 0.75rem; /* Espaçamento inferior */
      display: block; /* Faz o ícone ocupar uma linha própria */
    }

    /*
      ===== Título do Cartão =====
      Estiliza o título dentro do card.
    */
    .nav-card h3 {
      font-size: 1rem; /* Tamanho da fonte */
      font-weight: 600; /* Espessura da fonte */
      margin-bottom: 0.5rem; /* Espaçamento inferior */
      color: var(--text-primary); /* Cor do texto */
    }

    /*
      ===== Descrição do Cartão =====
      Estiliza a descrição dentro do card.
    */
    .nav-card p {
      font-size: 0.85rem; /* Tamanho da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      margin-bottom: 0.75rem; /* Espaçamento inferior */
    }

    /*
      ===== Banner de Cookies =====
      Estiliza o banner que aparece para pedir permissão para usar cookies.
    */
    .cookie-banner {
      position: fixed; /* Fixa o banner na tela */
      bottom: 0; /* Posiciona no rodapé */
      left: 0; /* Alinha à esquerda */
      width: 100%; /* Largura total */
      background: var(--surface); /* Cor de fundo */
      color: var(--text-primary); /* Cor do texto */
      padding: 0.75rem; /* Espaçamento interno */
      box-shadow: var(--shadow); /* Sombra leve */
      border-top: 1px solid var(--border); /* Linha superior */
      z-index: 1000; /* Garante que fique acima de outros elementos */
      display: none; /* Inicialmente escondido */
      flex-direction: column; /* Organiza os elementos em coluna */
      gap: 0.5rem; /* Espaço entre os elementos */
      align-items: center; /* Centraliza horizontalmente */
      text-align: center; /* Centraliza o texto */
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    }
      
     /*
      ===== Botão de Recusa de Cookies =====
      Estiliza o botão que permite ao usuário recusar o uso de cookies.
    */
    .cookie-banner button.decline:hover {
      background: var(--accent); /* Cor de fundo vermelha ao passar o mouse */
      color: white; /* Texto branco para melhor contraste */
    }

    /*
      ===== Cartão de Carteira (Wallet Card) =====
      Estiliza o card que exibe informações da carteira do usuário.
    */
    .wallet-card {
      background: var(--surface); /* Cor de fundo */
      border-radius: 8px; /* Cantos arredondados */
      padding: 1rem; /* Espaçamento interno */
      box-shadow: var(--shadow); /* Sombra leve */
      transition: transform 0.2s ease, box-shadow 0.2s ease; /* Animação suave */
      color: var(--text-primary); /* Cor do texto */
      text-align: center; /* Centraliza o texto */
      margin: 1rem auto 0; /* Margem superior e centralizado */
      max-width: 300px; /* Largura máxima */
      position: relative; /* Permite posicionar elementos filhos em relação a este */
    }

    /*
      ===== Efeito de Hover no Cartão de Carteira =====
      Define o que acontece quando o mouse passa por cima do cartão de carteira.
    */
    .wallet-card:hover {
      transform: translateY(-3px); /* Efeito de "flutuação" */
      box-shadow: var(--shadow-lg); /* Sombra maior */
    }

    /*
      ===== Ícone do Cartão de Carteira =====
      Estiliza o ícone que aparece dentro do cartão de carteira.
    */
    .wallet-card i {
      font-size: 1.5rem; /* Tamanho do ícone */
      margin-bottom: 0.5rem; /* Espaçamento inferior */
      display: block; /* Faz o ícone ocupar uma linha própria */
      color: var(--secondary); /* Cor azul */
    }

    /*
      ===== Título do Cartão de Carteira =====
      Estiliza o título dentro do cartão de carteira.
    */
    .wallet-card h3 {
      font-size: 1rem; /* Tamanho da fonte */
      font-weight: 600; /* Espessura da fonte */
      margin-bottom: 0.5rem; /* Espaçamento inferior */
    }

    /*
      ===== Descrição do Cartão de Carteira =====
      Estiliza a descrição dentro do cartão de carteira.
    */
    .wallet-card p {
      font-size: 0.85rem; /* Tamanho da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      margin-bottom: 0.75rem; /* Espaçamento inferior */
    }

    /*
      ===== Botão de Navegação do Cartão de Carteira =====
      Estiliza o botão que aparece dentro do cartão de carteira.
    */
    .wallet-card .nav-button {
      width: 100%; /* Largura total */
      padding: 0.5rem; /* Espaçamento interno */
      background: var(--secondary); /* Cor de fundo azul */
      color: white; /* Texto branco */
      border: none; /* Sem borda */
      border-radius: 4px; /* Cantos arredondados */
      font-size: 0.85rem; /* Tamanho da fonte */
      font-weight: 500; /* Espessura da fonte */
      cursor: pointer; /* Muda o cursor para indicar que é clicável */
      transition: background 0.2s ease; /* Animação suave ao passar o mouse */
    }

    /*
      ===== Efeito de Hover no Botão de Navegação =====
      Define o que acontece quando o mouse passa por cima do botão de navegação.
    */
    .wallet-card .nav-button:hover {
      background: var(--secondary-hover); /* Cor de fundo mais escura */
    }

    /*
      ===== Animação de Aparecimento Suave =====
      Define uma animação que faz elementos aparecerem suavemente na tela.
    */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); } /* Começa invisível e levemente deslocado */
      to { opacity: 1; transform: translateY(0); } /* Termina visível e na posição normal */
    }

    /*
      ===== Classe para Aplicar a Animação =====
      Aplica a animação de aparecimento suave a elementos que têm essa classe.
    */
    .fade-in {
      animation: fadeIn 0.4s ease-out forwards; /* Aplica a animação */
    }

    /*
      ===== Estatísticas da Empresa =====
      Estiliza a seção que exibe estatísticas da empresa.
    */
    .company-stats {
      margin: 1rem 0; /* Margem vertical */
      padding: 0.75rem; /* Espaçamento interno */
      background: var(--background); /* Cor de fundo */
      border-radius: 4px; /* Cantos arredondados */
      border: 1px solid var(--border); /* Borda fina */
    }

    /*
      ===== Item de Estatística =====
      Estiliza cada item individual dentro da seção de estatísticas.
    */
    .stat-item {
      display: flex; /* Usa flexbox para organizar os elementos */
      justify-content: space-between; /* Espaça os elementos */
      align-items: center; /* Centraliza verticalmente */
      padding: 0.4rem 0; /* Espaçamento vertical */
      border-bottom: 1px solid var(--border); /* Linha inferior para separar itens */
    }

    /*
      ===== Remove a Borda do Último Item =====
      Garante que o último item da lista não tenha uma borda inferior.
    */
    .stat-item:last-child {
      border-bottom: none; /* Remove a borda inferior */
    }

    /*
      ===== Rótulo da Estatística =====
      Estiliza o rótulo (nome) de cada estatística.
    */
    .stat-label {
      font-size: 0.85rem; /* Tamanho da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      font-weight: 500; /* Espessura da fonte */
    }

    /*
      ===== Valor da Estatística =====
      Estiliza o valor numérico de cada estatística.
    */
    .stat-value {
      font-size: 0.9rem; /* Tamanho da fonte */
      color: var(--primary); /* Cor principal */
      font-weight: 600; /* Espessura da fonte */
    }

    /*
      ===== Barra de Progresso de Nível =====
      Estiliza a seção que exibe a barra de progresso do nível do usuário.
    */
    .nivel-progress {
      margin-top: 0.75rem; /* Margem superior */
      text-align: center; /* Centraliza o texto */
    }

    /*
      ===== Barra de Progresso =====
      Estiliza a barra que mostra o progresso do usuário.
    */
    .progress-bar {
      width: 100%; /* Largura total */
      height: 8px; /* Altura da barra */
      background: var(--progress-bg); /* Cor de fundo */
      border-radius: 4px; /* Cantos arredondados */
      overflow: hidden; /* Esconde o que ultrapassa a largura */
      margin-bottom: 0.5rem; /* Margem inferior */
    }

    /*
      ===== Preenchimento da Barra de Progresso =====
      Estiliza a parte preenchida da barra de progresso.
    */
    .progress-fill {
      height: 100%; /* Altura total */
      background: var(--secondary); /* Cor azul */
      transition: width 0.5s ease; /* Animação suave ao mudar a largura */
    }

    /*
      ===== Texto de Progresso =====
      Estiliza o texto que exibe a porcentagem de progresso.
    */
    .progress-text {
      font-size: 0.75rem; /* Tamanho da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      font-weight: 500; /* Espessura da fonte */
    }

    /*
      ===== Ações da Empresa =====
      Estiliza a seção que contém botões de ação para a empresa.
    */
    .company-actions {
      display: flex; /* Usa flexbox para organizar os botões */
      gap: 0.5rem; /* Espaço entre os botões */
      margin-bottom: 0.75rem; /* Margem inferior */
      flex-wrap: wrap; /* Permite que os botões quebrem para a linha de baixo em telas pequenas */
    }

    /*
      ===== Botão de Ação =====
      Estiliza cada botão de ação individual.
    */
    .action-button {
      flex: 1; /* Faz o botão crescer para preencher o espaço disponível */
      padding: 0.5rem; /* Espaçamento interno */
      border: 1px solid var(--border); /* Borda fina */
      border-radius: 4px; /* Cantos arredondados */
      font-size: 0.85rem; /* Tamanho da fonte */
      font-weight: 500; /* Espessura da fonte */
      cursor: pointer; /* Muda o cursor para indicar que é clicável */
      transition: background 0.2s ease; /* Animação suave ao passar o mouse */
      display: flex; /* Usa flexbox para organizar ícone e texto */
      align-items: center; /* Centraliza verticalmente */
      justify-content: center; /* Centraliza horizontalmente */
      gap: 0.5rem; /* Espaço entre ícone e texto */
      background: var(--surface); /* Cor de fundo */
      color: var(--text-primary); /* Cor do texto */
      min-width: 120px; /* Largura mínima */
    }

    /*
      ===== Efeito de Hover no Botão de Ação =====
      Define o que acontece quando o mouse passa por cima de um botão de ação.
    */
    .action-button:hover {
      background: var(--secondary); /* Cor de fundo azul */
      color: white; /* Texto branco */
      border-color: var(--secondary); /* Cor da borda azul */
    }

    /*
      ===== Ícone do Botão de Ação =====
      Estiliza o ícone que aparece dentro do botão de ação.
    */
    .action-button i {
      font-size: 0.9rem; /* Tamanho do ícone */
    }

    /*
      ===== Modal (Janela Pop-up) =====
      Estiliza a janela pop-up que aparece sobre o conteúdo principal.
    */
    .modal {
      display: none; /* Inicialmente escondido */
      position: fixed; /* Fixa na tela */
      top: 0; /* Posiciona no topo */
      left: 0; /* Alinha à esquerda */
      width: 100%; /* Largura total */
      height: 100%; /* Altura total */
      background: rgba(0, 0, 0, 0.5); /* Fundo semi-transparente */
      z-index: 2000; /* Garante que fique acima de tudo */
      align-items: center; /* Centraliza verticalmente */
      justify-content: center; /* Centraliza horizontalmente */
      opacity: 0; /* Inicialmente invisível */
      transition: opacity 0.3s ease; /* Animação suave */
    }

    /*
      ===== Modal Ativo =====
      Define como o modal fica quando está visível.
    */
    .modal.active {
      display: flex; /* Exibe o modal */
      opacity: 1; /* Torna visível */
    }

    /*
      ===== Conteúdo do Modal de Publicação Guiada =====
      Estiliza o conteúdo do modal que guia o usuário na publicação.
    */
    #guidedPublishModal .modal-content {
      width: 90%; /* Largura relativa à tela */
      max-width: 500px; /* Largura máxima */
      height: 350px; /* Altura fixa */
      transition: width 0.3s ease, height 0.3s ease; /* Animação suave */
      overflow: hidden; /* Esconde conteúdo extra */
      padding: 1rem; /* Espaçamento interno */
    }

    /*
      ===== Conteúdo do Modal =====
      Estiliza o conteúdo dentro do modal.
    */
    .modal-content {
      background: var(--surface); /* Cor de fundo */
      border-radius: 8px; /* Cantos arredondados */
      box-shadow: var(--shadow-lg); /* Sombra para dar destaque */
      position: relative; /* Permite posicionar elementos filhos em relação a este */
    }

    /*
      ===== Título do Modal =====
      Estiliza o título dentro do modal.
    */
    .modal-content h2 {
      font-size: 1.125rem; /* Tamanho da fonte */
      font-weight: 600; /* Espessura da fonte */
      margin-bottom: 1rem; /* Margem inferior */
      color: var(--text-primary); /* Cor do texto */
    }

    /*
      ===== Rótulo do Modal =====
      Estiliza os rótulos dos campos de entrada no modal.
    */
    .modal-content label {
      display: block; /* Faz o rótulo ocupar uma linha própria */
      font-size: 0.85rem; /* Tamanho da fonte */
      font-weight: 500; /* Espessura da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      margin-bottom: 0.25rem; /* Margem inferior */
    }

    /*
      ===== Campos de Entrada do Modal =====
      Estiliza os campos de entrada de texto, área de texto e seleção.
    */
    .modal-content input,
    .modal-content textarea,
    .modal-content select {
      width: 100%; /* Largura total */
      padding: 0.5rem; /* Espaçamento interno */
      border: 1px solid var(--border); /* Borda fina */
      border-radius: 4px; /* Cantos arredondados */
      font-size: 0.9rem; /* Tamanho da fonte */
      margin-bottom: 0.75rem; /* Margem inferior */
      background: var(--background); /* Cor de fundo */
      color: var(--text-primary); /* Cor do texto */
      outline: none; /* Remove o contorno padrão ao focar */
    }

    /*
      ===== Área de Texto do Modal =====
      Permite que a área de texto seja redimensionada verticalmente.
    */
    .modal-content textarea {
      resize: vertical; /* Permite redimensionar apenas na vertical */
      min-height: 50px; /* Altura mínima */
    }

    /*
      ===== Campo de Entrada Somente Leitura =====
      Estiliza campos de entrada que não podem ser editados.
    */
    .modal-content input[readonly] {
      background: var(--progress-bg); /* Cor de fundo cinza claro */
      cursor: not-allowed; /* Muda o cursor para indicar que não é editável */
    }

    /*
      ===== Botão do Modal =====
      Estiliza os botões dentro do modal.
    */
    .modal-content button {
      width: 100%; /* Largura total */
      padding: 0.75rem; /* Espaçamento interno */
      background: var(--secondary); /* Cor de fundo azul */
      color: white; /* Texto branco */
      border: none; /* Sem borda */
      border-radius: 4px; /* Cantos arredondados */
      font-size: 0.9rem; /* Tamanho da fonte */
      font-weight: 500; /* Espessura da fonte */
      cursor: pointer; /* Muda o cursor para indicar que é clicável */
      transition: background 0.2s ease; /* Animação suave ao passar o mouse */
    }

    /*
      ===== Efeito de Hover no Botão do Modal =====
      Define o que acontece quando o mouse passa por cima de um botão do modal.
    */
    .modal-content button:hover {
      background: var(--secondary-hover); /* Cor de fundo mais escura */
    }

    /*
      ===== Botão de Fechar do Modal =====
      Estiliza o botão que fecha o modal.
    */
    .modal-content .close {
      position: absolute; /* Posiciona em relação ao modal */
      top: 10px; /* Distância do topo */
      right: 10px; /* Distância da direita */
      background: none; /* Sem fundo */
      border: none; /* Sem borda */
      font-size: 1.2rem; /* Tamanho da fonte */
      cursor: pointer; /* Muda o cursor para indicar que é clicável */
      color: var(--text-secondary); /* Cor secundária do texto */
    }

    /*
      ===== Mensagem de Erro do Modal =====
      Estiliza a mensagem de erro que aparece no modal.
    */
    .modal-content .error {
      color: var(--accent); /* Cor vermelha */
      font-size: 0.85rem; /* Tamanho da fonte */
      margin-bottom: 1rem; /* Margem inferior */
      display: none; /* Inicialmente escondido */
    }

    /*
      ===== Etapas do Modal =====
      Estiliza cada etapa do processo dentro do modal.
    */
    .step {
      display: none; /* Inicialmente escondido */
      height: 100%; /* Altura total */
      opacity: 0; /* Inicialmente invisível */
      transition: opacity 0.3s ease; /* Animação suave */
      padding-bottom: 40px; /* Espaço para o controle de navegação */
      overflow-y: auto; /* Permite rolagem vertical se necessário */
    }

    /*
      ===== Etapa Ativa =====
      Define como a etapa fica quando está visível.
    */
    .step.active {
      display: block; /* Exibe a etapa */
      opacity: 1; /* Torna visível */
    }

    /*
      ===== Animação de Aparecimento da Etapa =====
      Aplica uma animação suave ao aparecer uma etapa.
    */
    .fade-in-step {
      opacity: 1 !important; /* Garante visibilidade */
      animation: fadeIn 0.4s ease-out forwards; /* Aplica a animação */
    }

    /*
      ===== Navegação entre Etapas =====
      Estiliza a barra de navegação que permite avançar ou voltar entre as etapas.
    */
    .step-navigation {
      position: absolute; /* Posiciona em relação ao modal */
      bottom: 0; /* Fixa no rodapé */
      left: 0; /* Alinha à esquerda */
      right: 0; /* Alinha à direita */
      padding: 0.75rem 1rem; /* Espaçamento interno */
      border-top: 1px solid var(--border); /* Linha superior */
      background: var(--surface); /* Cor de fundo */
      display: flex; /* Usa flexbox para organizar os botões */
      justify-content: space-between; /* Espaça os botões */
      gap: 1rem; /* Espaço entre os botões */
    }

    /*
      ===== Botões de Navegação =====
      Estiliza os botões de navegação entre etapas.
    */
    .step-navigation button {
      flex: 1; /* Faz o botão crescer para preencher o espaço disponível */
      padding: 0.5rem; /* Espaçamento interno */
      font-size: 0.85rem; /* Tamanho da fonte */
    }

    /*
      ===== Botão de Voltar =====
      Estiliza o botão que permite voltar para a etapa anterior.
    */
    .step-navigation .back {
      background: var(--text-secondary); /* Cor de fundo cinza */
    }

    /*
      ===== Efeito de Hover no Botão de Voltar =====
      Define o que acontece quando o mouse passa por cima do botão de voltar.
    */
    .step-navigation .back:hover {
      background: var(--text-primary); /* Cor de fundo mais escura */
    }

    /*
      ===== Indicador de Etapa =====
      Exibe em qual etapa o usuário está (ex: "Passo 1 de 4").
    */
    .step-indicator {
      font-size: 0.8rem; /* Tamanho da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      text-align: center; /* Centraliza o texto */
      margin-bottom: 0.5rem; /* Margem inferior */
    }

    /*
      ===== Container da Lista de Passos =====
      Estiliza o container que contém a lista de passos na Etapa 2.
    */
    .step-list-container {
      margin-bottom: 0.5rem; /* Margem inferior */
      max-height: 150px; /* Altura máxima */
      overflow-y: auto; /* Permite rolagem vertical se necessário */
      padding-right: 5px; /* Espaçamento à direita */
    }

    /*
      ===== Item da Lista de Passos =====
      Estiliza cada item individual na lista de passos.
    */
    .step-item {
      display: flex; /* Usa flexbox para organizar os elementos */
      gap: 0.5rem; /* Espaço entre os elementos */
      align-items: center; /* Centraliza verticalmente */
      margin-bottom: 0.5rem; /* Margem inferior */
    }

    /*
      ===== Campo de Entrada do Item de Passo =====
      Estiliza o campo de entrada dentro de cada item de passo.
    */
    .step-item input {
      margin-bottom: 0; /* Remove a margem inferior */
      flex-grow: 1; /* Faz o campo crescer para preencher o espaço disponível */
    }

    /*
      ===== Botão do Item de Passo =====
      Estiliza o botão que permite remover um item de passo.
    */
    .step-item button {
      width: auto; /* Largura automática */
      padding: 0.25rem 0.5rem; /* Espaçamento interno */
      background: var(--accent); /* Cor de fundo vermelha */
    }

    /*
      ===== Botão de Adicionar Passo =====
      Estiliza o botão que permite adicionar um novo passo.
    */
    .add-step-button {
      background: var(--secondary); /* Cor de fundo azul */
      color: white; /* Texto branco */
      padding: 0.5rem; /* Espaçamento interno */
      margin-top: 0.5rem; /* Margem superior */
    }

    /*
      ===== Item do Resumo =====
      Estiliza cada item individual na seção de resumo (Etapa 4).
    */
    .summary-item {
      display: flex; /* Usa flexbox para organizar os elementos */
      justify-content: space-between; /* Espaça os elementos */
      padding: 0.3rem 0; /* Espaçamento vertical */
      font-size: 0.9rem; /* Tamanho da fonte */
      border-bottom: 1px dashed var(--border); /* Linha pontilhada inferior */
    }

    /*
      ===== Remove a Borda do Último Item do Resumo =====
      Garante que o último item do resumo não tenha uma borda inferior.
    */
    .summary-item:last-child {
      border-bottom: none; /* Remove a borda inferior */
    }

    /*
      ===== Rótulo do Item do Resumo =====
      Estiliza o rótulo (nome) de cada item do resumo.
    */
    .summary-item .label {
      color: var(--text-secondary); /* Cor secundária do texto */
    }

    /*
      ===== Valor do Item do Resumo =====
      Estiliza o valor de cada item do resumo.
    */
    .summary-item .value {
      font-weight: 600; /* Espessura da fonte */
      color: var(--text-primary); /* Cor principal do texto */
    }

    /*
      ===== Valor Final do Resumo =====
      Estiliza o valor final exibido no resumo.
    */
    .summary-final-value {
      font-size: 1.1rem; /* Tamanho da fonte */
      font-weight: 700; /* Espessura da fonte */
      color: var(--secondary); /* Cor azul */
      margin-top: 0.5rem; /* Margem superior */
      border-top: 2px solid var(--secondary); /* Linha superior azul */
      padding-top: 0.5rem; /* Espaçamento superior */
    }

    /*
      ===== Caixa de Informação do Modo =====
      Estiliza a caixa que exibe informações sobre o modo atual.
    */
    .mode-info-box {
      font-size: 0.8rem; /* Tamanho da fonte */
      color: var(--text-secondary); /* Cor secundária do texto */
      background: var(--background); /* Cor de fundo */
      border: 1px solid var(--border); /* Borda fina */
      border-radius: 4px; /* Cantos arredondados */
      padding: 0.5rem; /* Espaçamento interno */
      margin-top: 0.75rem; /* Margem superior */
      line-height: 1.3; /* Espaçamento entre linhas */
    }
/* Estilos para destacar modo Empresarial ou Pessoal */
.empresarial-mode {
  border-left: 5px solid var(--accent);
}
.pessoal-mode {
  border-left: 5px solid var(--primary);
}
    /*
      ===== Design Responsivo para Telas Médias (até 768px) =====
      Ajusta o layout para telas de tablets e celulares maiores.
    */
    @media (max-width: 768px) {
      .menu {
        width: min(80vw, 240px); /* Largura relativa à tela */
      }
      .header {
        padding: 0 12px; /* Espaçamento interno horizontal */
      }
      .top-bar__icon {
        padding: 6px; /* Espaçamento interno */
      }
      .top-bar__icon i {
        font-size: 1rem; /* Tamanho do ícone */
      }
      .menu__link {
        padding: 8px 10px; /* Espaçamento interno */
        font-size: 0.85rem; /* Tamanho da fonte */
      }
      .menu__link i {
        font-size: 1rem; /* Tamanho do ícone */
      }
      .premium-button {
        padding: 8px 12px; /* Espaçamento interno */
        font-size: 0.85rem; /* Tamanho da fonte */
      }
      .notification {
        right: 8px; /* Distância da direita */
        bottom: 8px; /* Distância do rodapé */
        padding: 8px 12px; /* Espaçamento interno */
      }
      .carousel .nav-card {
        flex: 0 0 100%; /* Cada card ocupa 100% da largura */
        min-width: 100%; /* Largura mínima */
        max-width: 100%; /* Largura máxima */
      }
      #guidedPublishModal .modal-content {
        height: auto; /* Altura flexível */
        max-height: 90vh; /* Altura máxima relativa à tela */
        overflow-y: auto; /* Permite rolagem vertical */
        min-height: 350px; /* Altura mínima */
        width: 95%; /* Largura relativa à tela */
        padding: 1rem; /* Espaçamento interno */
      }
      .step-navigation {
        position: sticky; /* Fixa a navegação no rodapé do modal */
        bottom: -1rem; /* Ajuste para parecer fixo */
        padding: 0.5rem 1rem; /* Espaçamento interno */
      }
      .step-navigation button {
        padding: 0.75rem; /* Espaçamento interno */
      }
    }

    /*
      ===== Design Responsivo para Telas Pequenas (até 600px) =====
      Ajusta o layout para telas de celulares.
    */
    @media (max-width: 600px) {
      .header {
        padding: 0.5rem; /* Espaçamento interno */
      }
      .header h1 {
        font-size: 1rem; /* Tamanho da fonte */
      }
      .dashboard-section {
        padding: 0.75rem; /* Espaçamento interno */
      }
      .dashboard-section h2 {
        font-size: 1.125rem; /* Tamanho da fonte */
      }
      .nav-card {
        padding: 0.75rem; /* Espaçamento interno */
      }
      .nav-card h3 {
        font-size: 0.9rem; /* Tamanho da fonte */
      }
      .nav-card i {
        font-size: 1.75rem; /* Tamanho do ícone */
      }
      .cookie-banner .buttons {
        flex-direction: column; /* Organiza os botões em coluna */
        width: 100%; /* Largura total */
      }
      .cookie-banner button {
        width: 100%; /* Largura total */
      }
      .wallet-card {
        padding: 0.75rem; /* Espaçamento interno */
        max-width: 100%; /* Largura total */
      }
      .wallet-card i {
        font-size: 1.25rem; /* Tamanho do ícone */
      }
      .company-stats {
        padding: 0.5rem; /* Espaçamento interno */
      }
      .stat-item {
        padding: 0.3rem 0; /* Espaçamento vertical */
      }
      .stat-label {
        font-size: 0.75rem; /* Tamanho da fonte */
      }
      .stat-value {
        font-size: 0.8rem; /* Tamanho da fonte */
      }
      .action-button {
        padding: 0.5rem; /* Espaçamento interno */
        font-size: 0.75rem; /* Tamanho da fonte */
      }
      .action-button i {
        font-size: 0.8rem; /* Tamanho do ícone */
      }
    }

    /*
      ===== Design Responsivo para Telas Médias (601px a 1024px) =====
      Ajusta o layout para tablets e celulares maiores em modo paisagem.
    */
    @media (min-width: 601px) and (max-width: 1024px) {
      .header h1 {
        font-size: 1.125rem; /* Tamanho da fonte */
      }
      .dashboard-section {
        padding: 0.75rem; /* Espaçamento interno */
      }
      .dashboard-section h2 {
        font-size: 1.25rem; /* Tamanho da fonte */
      }
      .wallet-card {
        max-width: 280px; /* Largura máxima */
      }
    }

    /*
      ===== Rodapé de Informação do Usuário =====
      Estiliza o rodapé que exibe informações do usuário.
    */
    footer#userInfoFooter {
      position: fixed; /* Fixa na tela */
      bottom: 0; /* Posiciona no rodapé */
      left: 0; /* Alinha à esquerda */
      width: 100%; /* Largura total */
      background: var(--primary); /* Cor de fundo escura */
      color: white; /* Texto branco */
      text-align: center; /* Centraliza o texto */
      padding: 0.3rem; /* Espaçamento interno */
      font-size: 0.8rem; /* Tamanho da fonte */
      border-top: 1px solid var(--border); /* Linha superior */
      z-index: 999; /* Garante que fique acima de outros elementos */
      font-family: 'Inter', sans-serif; /* Define a fonte */
    }
    
    
    
    
    
    
    
    </style>
</head>
<!--
  A tag `<body>` contém todo o conteúdo visível da página.
  O atributo `data-theme="light"` define que o tema inicial da página é claro.
-->
<body data-theme="light">
  <!--
    Container que engloba o menu de cabeçalho e o menu lateral.
    Isso ajuda a organizar e agrupar os elementos de navegação.
  -->
  <div class="header-menu">
    <!--
      Barra de navegação principal no topo da página.
      `aria-label="Navegação principal"` e `role="navigation"` são atributos de acessibilidade,
      que ajudam leitores de tela a identificar a função desse elemento para usuários com deficiência visual.
    -->
    <nav aria-label="Navegação principal" class="header" role="navigation">
      <!--
        Seção esquerda do cabeçalho: contém o título da página.
        Aqui é exibido o ícone de foguete (do Font Awesome) e o texto "Publicar Serviço".
      -->
      <div class="top-bar__section">
        <h1>
          <!--
            Ícone de foguete (Font Awesome) e título da página.
            O ícone é usado para tornar a interface mais visual e intuitiva.
          -->
          <i class="fas fa-rocket"></i>Publicar Serviço
        </h1>
      </div>
      <!--
        Seção direita do cabeçalho: contém botões de ação.
        Esses botões permitem ao usuário interagir com a interface, como abrir o menu ou trocar o tema.
      -->
      <div class="top-bar__section">
        <!--
          Botão para abrir/fechar o menu lateral.
          `aria-label="Alternar menu"` descreve a função do botão para acessibilidade,
          permitindo que leitores de tela informem ao usuário o que o botão faz.
        -->
        <button aria-label="Alternar menu" class="top-bar__icon" id="menu-icon">
          <!--
            Ícone de barras (hamburger menu), que é um padrão visual para indicar que clicar aqui abre um menu.
          -->
          <i class="fas fa-bars"></i>
        </button>
        <!--
          Botão para alternar entre tema claro e escuro.
          `aria-label` e `title` fornecem informações adicionais sobre a função do botão.
        -->
        <button aria-label="Alternar tema claro/escuro" class="top-bar__icon" id="theme-toggle" title="Alternar tema">
          <!--
            Ícone de ajuste, que sugere a ideia de "ajustar" ou "trocar" algo na interface.
          -->
          <i class="fas fa-adjust"></i>
        </button>
      </div>
    </nav>

    <!--
      Menu lateral principal da aplicação.
      `aria-label="Menu principal"` e `id="main-menu"` são usados para referência e acessibilidade.
      O menu está inicialmente escondido e pode ser aberto clicando no botão de menu no cabeçalho.
    -->
    <nav aria-label="Menu principal" class="menu" id="main-menu">
      <!--
        Lista de itens do menu.
        Cada item é um botão que, quando clicado, navega para uma seção específica da aplicação.
      -->
      <ul class="menu__list">
        <!--
          Item do menu: "Página Principal".
          Ao clicar, a função `navigateTo('home')` é chamada para levar o usuário à página inicial.
        -->
        <li class="menu__item">
          <button class="menu__link" onclick="navigateTo('home')">
            <!--
              Ícone de casa (Font Awesome) e texto "Página Principal".
              O ícone ajuda a identificar visualmente a função do item.
            -->
            <i class="fas fa-home"></i>
            <span>Página Principal</span>
          </button>
        </li>
        <!--
          Item do menu: "YshippCommerce invest".
          Ao clicar, a função `navigateTo('yshippcommerce')` é chamada.
        -->
        <li class="menu__item">
          <button class="menu__link" onclick="navigateTo('yshippcommerce')">
            <i class="fas fa-store"></i>
            <span>YshippCommerce invest</span>
          </button>
        </li>
        <!--
          Item do menu: "Publicar Serviço".
          Ao clicar, a função `navigateTo('market')` é chamada.
        -->
        <li class="menu__item">
          <button class="menu__link" onclick="navigateTo('market')">
            <i class="fas fa-briefcase"></i>
            <span>Publicar Serviço</span>
          </button>
        </li>
        <!--
          Item do menu: "Shopping Shipp".
          Ao clicar, a função `navigateTo('store')` é chamada.
        -->
        <li class="menu__item">
          <button class="menu__link" onclick="navigateTo('store')">
            <i class="fas fa-shopping-cart"></i>
            <span>Shopping Shipp</span>
          </button>
        </li>
        <!--
          Item do menu: "Gerador de Golds".
          Ao clicar, a função `navigateTo('generator')` é chamada.
        -->
        <li class="menu__item">
          <button class="menu__link" onclick="navigateTo('generator')">
            <i class="fas fa-ticket-alt"></i>
            <span>Gerador de Golds</span>
          </button>
        </li>
        <!--
          Item do menu: "Carteira e Bank Central".
          Ao clicar, a função `navigateTo('wallet')` é chamada.
        -->
        <li class="menu__item">
          <button class="menu__link" onclick="navigateTo('wallet')">
            <i class="fas fa-wallet"></i>
            <span>Carteira e Bank Central</span>
          </button>
        </li>
        <!--
          Item do menu: "Sair".
          Ao clicar, o usuário é desconectado da aplicação.
          A função específica para isso não está definida aqui, mas provavelmente é tratada em JavaScript.
        -->
        <li class="menu__item">
          <button class="menu__link" id="logout-button">
            <i class="fas fa-sign-out-alt"></i>
            <span>Sair</span>
          </button>
        </li>
      </ul>
    </nav>
  </div>

  <!--
    Container para exibir notificações ao usuário.
    Inicialmente vazio e escondido, será preenchido e exibido dinamicamente via JavaScript.
  -->
  <div class="notification" id="notification"></div>

  <!--
    Modal (janela pop-up) para guiar o usuário no processo de publicação de um serviço.
    Inicialmente escondido, será exibido quando o usuário clicar em "Contratar" ou "Publicar Serviço".
  -->
  <div id="guidedPublishModal" class="modal">
    <!--
      Conteúdo do modal, que inclui o formulário de publicação de serviço.
    -->
    <div class="modal-content" id="modalContent">
      <!--
        Botão para fechar o modal (janela pop-up).
        Ao clicar, a função `closeModal()` é chamada.
      -->
      <button class="close" onclick="closeModal()">×</button>
      <!--
        Título do modal, que inclui o nome da empresa selecionada.
        O nome da empresa será preenchido dinamicamente via JavaScript.
      -->
      <h2 id="modalTitle">Publicar Serviço - <span id="modalCompanyName"></span></h2>
      <!--
        Container para exibir mensagens de erro, como validações de formulário.
        Inicialmente escondido, será exibido se houver erros.
      -->
      <div id="errorMessage" class="error"></div>

      <!--
        Indicador de etapa atual do formulário (ex: "Etapa 1 de 4").
        O número da etapa será atualizado dinamicamente via JavaScript.
      -->
      <p class="step-indicator">Etapa <span id="currentStepNumber">1</span> de 4</p>

      <!--
        Primeira etapa do formulário: seleção de categoria e descrição do serviço.
        A classe `active` faz com que esta etapa seja exibida inicialmente.
      -->
      <div id="step-1" class="step active">
        <!--
          Campo para selecionar a subcategoria do serviço.
          `onchange="calculateDifficultyAndProof()"` chama uma função para calcular a dificuldade e a prova necessária
          assim que o usuário selecionar uma subcategoria.
        -->
        <label for="subcategory">1. Selecione a Categoria do Serviço</label>
        <select id="subcategory" required onchange="calculateDifficultyAndProof()">
          <!--
            Opção padrão do menu suspenso, que pede ao usuário para escolher uma subcategoria.
            `disabled selected` faz com que esta opção seja exibida inicialmente, mas não possa ser selecionada como valor final.
          -->
          <option value="" disabled selected>Escolha uma subcategoria</option>
        </select>

        <!--
          Campo para exibir o nível de dificuldade do serviço.
          `readonly` impede que o usuário edite manualmente este campo.
          O valor será preenchido dinamicamente via JavaScript.
        -->
        <label for="serviceDifficulty">Nível de Dificuldade</label>
        <input type="text" id="serviceDifficulty" readonly value="Aguardando seleção...">

        <!--
          Campo para definir quantos freelancers são necessários para executar o serviço.
          `oninput="prepareSummary()"` chama uma função para atualizar o resumo do serviço
          sempre que o usuário digitar um número.
        -->
        <label for="freelancers">2. Quantidade de Freelancers Necessários</label>
        <input type="number" id="freelancers" min="1" required placeholder="Ex: 50" oninput="prepareSummary()">

        <!--
          Campo para descrever brevemente o serviço que será publicado.
          O texto digitado aqui será usado para informar aos freelancers o que devem fazer.
        -->
        <label for="serviceDescription">3. Descrição Rápida do Serviço</label>
        <textarea id="serviceDescription" required placeholder="Ex: Preciso de 50 pessoas para curtir minha foto mais recente."></textarea>
      </div>

      <!--
        Segunda etapa do formulário: definição dos passos do serviço.
        Inicialmente escondida, será exibida quando o usuário avançar para a Etapa 2.
      -->
      <div id="step-2" class="step">
        <!--
          Título da segunda etapa: definição dos passos do serviço.
        -->
        <label>1. Defina os Passos do Serviço (Máx. 5)</label>
        <!--
          Texto informativo sobre o preço base do serviço.
          O valor "150 Golds" será atualizado dinamicamente via JavaScript.
        -->
        <p style="font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
          O preço base é <span id="basePriceDisplay">150 Golds</span> e aumenta com cada passo.
        </p>

        <!--
          Container para os passos do serviço.
          Cada passo é um campo de texto que descreve uma ação que o freelancer deve executar.
        -->
        <div id="serviceStepsContainer" class="step-list-container">
          <!--
            Primeiro passo do serviço, que é obrigatório.
            `data-step-id="1"` identifica este passo para manipulação via JavaScript.
          -->
          <div class="step-item" data-step-id="1">
            <!--
              Campo de texto para descrever o primeiro passo.
              `oninput="updateStepDescription(1, this.value)"` atualiza a descrição do passo
              sempre que o usuário digitar algo.
            -->
            <input type="text" placeholder="Passo 1 (Obrigatório)" class="service-step-input" required oninput="updateStepDescription(1, this.value)">
            <!--
              Botão para remover este passo.
              Inicialmente escondido, será exibido se houver mais de um passo.
            -->
            <button class="bg-red-500 hover:bg-red-700 text-white" style="display: none;" onclick="removeStep(1)">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>

        <!--
          Botão para adicionar mais passos ao serviço.
          Ao clicar, a função `addStep()` é chamada.
        -->
        <button class="add-step-button" onclick="addStep()" id="addStepButton">
          <i class="fas fa-plus"></i> Adicionar Passo (Total: <span id="stepCount">1</span>)
        </button>

        <!--
          Campo para exibir a recompensa total estimada por freelancer.
          O valor será calculado e atualizado dinamicamente via JavaScript.
        -->
        <div style="margin-top: 1rem;">
          <label for="calculatedReward">Recompensa Total Estimada por Freelancer</label>
          <input type="text" id="calculatedReward" readonly value="150 Golds (Base)">

          <!--
            Container para informações sobre o modo de duplicação de recompensa.
            Será preenchido dinamicamente se o modo de duplicação estiver ativo.
          -->
          <div class="mode-info-box" id="modeDuplicationInfo"></div>
        </div>
      </div>

      <!--
        Terceira etapa do formulário: definição da prova de execução do serviço.
        Inicialmente escondida, será exibida quando o usuário avançar para a Etapa 3.
      -->
      <div id="step-3" class="step">
        <!--
          Campo para descrever como o freelancer deve provar que executou o serviço.
          Exemplo: "Enviar captura de tela da curtida no perfil".
        -->
        <label>1. Descreva a Prova de Execução do Serviço</label>
        <textarea id="proofDescription" required placeholder="Ex: Enviar captura de tela da curtida no perfil."></textarea>

        <!--
          Seleção dos tipos de prova exigidos (imagem, texto, etc.).
          O número mínimo de provas será atualizado dinamicamente via JavaScript.
        -->
        <label>2. Tipos de Prova Exigidos (Mínimo: <span id="minProofCount">1</span>)</label>
        <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
          <!--
            Checkbox para exigir prova em formato de imagem.
            `checked` faz com que esta opção seja selecionada por padrão.
          -->
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="checkbox" id="proofImage" value="Imagem" checked> Imagem
          </label>
          <!--
            Checkbox para exigir prova em formato de texto.
          -->
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="checkbox" id="proofText" value="Texto"> Texto
          </label>
        </div>
        <!--
          Aviso sobre o número mínimo de provas, que aumenta conforme a complexidade do serviço.
        -->
        <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.5rem;">
          *O número mínimo de provas aumenta com a complexidade do serviço.
        </p>
      </div>

      <!--
        Quarta etapa do formulário: resumo e confirmação do serviço.
        Inicialmente escondida, será exibida quando o usuário avançar para a Etapa 4.
      -->
      <div id="step-4" class="step">
        <!--
          Título e mensagem de confirmação para o usuário.
          Os dados do usuário (nome e ID) serão preenchidos dinamicamente.
        -->
        <div style="text-align: center; margin-bottom: 1rem;">
          <h3 class="text-xl font-bold" style="color: var(--secondary);">Resumo e Confirmação</h3>
          <p id="summaryUserMessage" style="margin-top: 0.5rem; font-size: 0.9rem;">
            Seu serviço será publicado. Você confirma isso, <span id="summaryUserName">...</span> (<span id="summaryUserId">...</span>)?
          </p>
        </div>

        <!--
          Container com o resumo dos dados do serviço.
          Todos os valores serão preenchidos dinamicamente via JavaScript.
        -->
        <div style="background: var(--background); padding: 0.75rem; border-radius: 4px;">
          <!--
            Itens do resumo: nível de dificuldade, recompensa, quantidade de freelancers, etc.
          -->
          <div class="summary-item">
            <span class="label">Nível de Dificuldade</span>
            <span class="value" id="summaryDifficulty">...</span>
          </div>
          <div class="summary-item">
            <span class="label">Recompensa por Tarefa (Golds)</span>
            <span class="value" id="summaryReward">...</span>
          </div>
          <div class="summary-item">
            <span class="label">Quantidade de Freelancers</span>
            <span class="value" id="summaryFreelancers">...</span>
          </div>
          <div class="summary-item">
            <span class="label">Custo Total Bruto (Golds)</span>
            <span class="value" id="summaryGrossCost">...</span>
          </div>
          <div class="summary-item">
            <span class="label">Taxa da Empresa (1% + 50 Golds)</span>
            <span class="value" id="summaryFee">...</span>
          </div>
          <!--
            Linha opcional para exibir o custo dobrado, caso o modo de duplicação esteja ativo.
            Inicialmente escondida, será exibida se necessário.
          -->
          <div class="summary-item" id="summaryDoubledCostRow" style="display: none;">
            <span class="label">Custo Dobrado (Para Funcionários)</span>
            <span class="value" id="summaryDoubledCost">...</span>
          </div>
          <!--
            Container para informações sobre o modo de duplicação.
            Será preenchido dinamicamente se o modo de duplicação estiver ativo.
          -->
          <div class="mode-info-box" id="modeDuplicationSummary" style="margin-top: 0.5rem; display: none;"></div>
          <!--
            Valor final total a ser pago pelo serviço.
          -->
          <div class="summary-final-value">
            <span class="label">Valor Final Total (Golds)</span>
            <span class="value" id="summaryFinalCost">...</span>
          </div>
        </div>
        <!--
          Aviso de saldo insuficiente, inicialmente escondido.
          Será exibido se o usuário não tiver Golds suficientes para publicar o serviço.
        -->
        <p id="summaryWarning" class="error" style="display: none; margin-top: 0.75rem; text-align: center;">Saldo insuficiente em Golds!</p>
        <!--
          Botão para confirmar a publicação do serviço.
          Ao clicar, a função `publishService()` é chamada.
        -->
        <button onclick="publishService()" id="confirmPublishButton" style="margin-top: 1rem;">Confirmar Publicação</button>
      </div>

      <!--
        Barra de navegação entre etapas (voltar/avançar).
        Permite ao usuário navegar entre as etapas do formulário.
      -->
      <div class="step-navigation">
        <!--
          Botão para voltar à etapa anterior.
          Inicialmente escondido, será exibido a partir da Etapa 2.
        -->
        <button class="back" id="backButton" onclick="prevStep()" style="display: none;">
          <i class="fas fa-arrow-left"></i> Voltar
        </button>
        <!--
          Botão para avançar à próxima etapa.
          Ao clicar, a função `nextStep()` é chamada.
        -->
        <button class="next" id="nextButton" onclick="nextStep()">
          Avançar <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!--
    Container principal da página, onde fica o conteúdo visível.
    `style="width:100%; max-width:1000px; padding:0 0.75rem 120px; margin:0 auto;"` define o layout e o espaçamento.
  -->
  <main style="width:100%; max-width:1000px; padding:0 0.75rem 120px; margin:0 auto;">
    <!--
      Cartão da carteira do usuário.
      Exibe um ícone, título, descrição e um botão para acessar a carteira.
      A classe `fade-in` aplica uma animação de aparecimento suave.
    -->
    <div id="wallet-card" class="wallet-card fade-in">
      <i class="fas fa-wallet"></i>
      <h3>Carteira</h3>
      <p>Gerencie seus Golds e transações.</p>
      <!--
        Botão para navegar até a página da carteira.
        Ao clicar, a função `navigateTo('wallet')` é chamada.
      -->
      <button class="nav-button" onclick="navigateTo('wallet')">Acessar Carteira</button>
    </div>

    <!--
      Seção "Modo Empresarial": exibe empresas parceiras e suas estatísticas.
      A classe `fade-in` aplica uma animação de aparecimento suave.
    -->
    <section id="dashboard-section-empresarial" class="dashboard-section fade-in">
      <div id="empresasSection">
        <!--
          Título da seção, com ícone de prédio (Font Awesome).
        -->
        <h2><i class="fas fa-building"></i>Modo Empresarial</h2>
        <!--
          Descrição da seção, informando ao usuário o que ele pode fazer aqui.
        -->
        <p style="margin-bottom: 0.75rem; color: var(--text-secondary); font-size: 0.85rem;">
          Conheça nossas parceiras e acompanhe seu progresso.
        </p>
        <!--
          Container do carrossel de empresas.
          Permite ao usuário navegar horizontalmente entre os cartões das empresas.
        -->
        <div class="carousel-container">
          <div class="carousel" id="company-carousel-empresarial">
            <!--
              Cartão da empresa "Micro Influenciador do Facebook".
              Cada cartão representa uma empresa parceira e exibe suas informações e estatísticas.
              A classe `fade-in` aplica uma animação de aparecimento suave.
            -->
            <div class="nav-card company-card fade-in" data-card-id="facebook">
              <!--
                Ícone e nome da empresa.
                O ícone é colorido de acordo com a identidade visual da rede social.
              -->
              <i class="fab fa-facebook" style="color: #1877f2;"></i>
              <h3>Micro Influenciador do Facebook</h3>
              <!--
                Botões de ação: Contratar, Executar Missões e Ver Serviços.
                Cada botão chama uma função JavaScript específica.
              -->
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('facebook', 'Micro Influenciador do Facebook', 'empresarial')">
                  <i class="fas fa-handshake"></i> Contratar
                </button>
                <button class="action-button" onclick="executarMissoes('facebook')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewServices('facebook')">
                  <i class="fas fa-eye"></i> Ver Serviços
                </button>
              </div>

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              <!--
  Container que agrupa todas as estatísticas de uma empresa/serviço.
  Cada empresa/serviço (ex: Mobile, Telegram, TikTok) tem seu próprio bloco de estatísticas.
-->

<div class="company-stats">
  <!--
    Item de estatística: "Total de Instalações".
    Cada item de estatística é composto por um rótulo (label) e um valor (value).
    - `stat-label`: classe para o texto descritivo (ex: "Total de Instalações").
    - `stat-value`: classe para o valor numérico ou descritivo (ex: "0").
    - `id="mobile-instalacoes"`: identificador único para que o JavaScript possa atualizar este valor dinamicamente.
  -->
  <div class="stat-item">
    <span class="stat-label">Total de Instalações</span>
    <span class="stat-value" id="mobile-instalacoes">0</span>
  </div>

  <!--
    Item de estatística: "Golds Acumulados".
    Golds são a moeda virtual usada na plataforma.
  -->
  <div class="stat-item">
    <span class="stat-label">Golds Acumulados</span>
    <span class="stat-value" id="mobile-golds">0</span>
  </div>

  <!--
    Item de estatística: "Nível Global".
    Indica o nível ou classificação do usuário nesta categoria.
  -->
  <div class="stat-item">
    <span class="stat-label">Nível Global</span>
    <span class="stat-value" id="mobile-nivel">Programador Iniciante</span>
  </div>

  <!--
    Item de estatística: "Serviços Publicados".
    Quantidade de serviços que o usuário já publicou nesta categoria.
  -->
  <div class="stat-item">
    <span class="stat-label">Serviços Publicados</span>
    <span class="stat-value" id="mobile-published">0</span>
  </div>

  <!--
    Item de estatística: "Ativos".
    Quantidade de serviços ativos (em andamento) nesta categoria.
  -->
  <div class="stat-item">
    <span class="stat-label">Ativos</span>
    <span class="stat-value" id="mobile-active">0</span>
  </div>

  <!--
    Item de estatística: "Pendentes".
    Quantidade de serviços pendentes (aguardando ação) nesta categoria.
  -->
  <div class="stat-item">
    <span class="stat-label">Pendentes</span>
    <span class="stat-value" id="mobile-pending">0</span>
  </div>
</div>

<!--
  Container que exibe o progresso do usuário em relação a uma meta.
  - `nivel-progress`: classe para o container geral.
  - `progress-bar`: classe para a barra de progresso (fundo cinza).
  - `progress-fill`: classe para a parte preenchida da barra (cor azul).
  - `progress-text`: classe para o texto que exibe o progresso atual (ex: "0 / 250.000").
-->
<div class="nivel-progress">
  <!--
    Barra de progresso visual.
    - A largura da parte preenchida (`style="width: 0%"`) é atualizada dinamicamente via JavaScript.
  -->
  <div class="progress-bar">
    <div class="progress-fill" id="mobile-progress" style="width: 0%"></div>
  </div>
  <!--
    Texto que exibe o progresso atual em formato numérico (ex: "0 / 250.000").
    - `id="mobile-progress-text"`: identificador único para atualização dinâmica.
  -->
  <span class="progress-text" id="mobile-progress-text">0 / 250.000</span>
</div>
<!--
  Fim do cartão da empresa "Aplicativo Móvel".
-->
</div>

<!--
  Início do cartão da empresa "Telegram".
  - `nav-card`: classe para o cartão de navegação.
  - `company-card`: classe para cartões de empresas.
  - `fade-in`: classe para animação de aparecimento suave.
  - `data-card-id="telegram"`: identificador único para este cartão, usado em JavaScript.
-->
<div class="nav-card company-card fade-in" data-card-id="telegram">
  <!--
    Ícone e título da empresa "Telegram".
    - `fab fa-telegram`: classe do Font Awesome para o ícone do Telegram.
    - `style="color: #0088cc;"`: define a cor do ícone.
  -->
  <i class="fab fa-telegram" style="color: #0088cc;"></i>
  <h3>Telegram</h3>

  <!--
    Container com os botões de ação para a empresa "Telegram".
    Cada botão executa uma função JavaScript específica ao ser clicado.
  -->
  <div class="company-actions">
    <!--
      Botão "Contratar": abre o modal para publicar um serviço no Telegram.
      - `onclick="openPublishModal('telegram', 'Telegram', 'empresarial')"`: chama a função para abrir o modal de publicação.
    -->
    <button class="action-button" onclick="openPublishModal('telegram', 'Telegram', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>

    <!--
      Botão "Executar Missões": leva o usuário para a seção de missões do Telegram.
    -->
    <button class="action-button" onclick="executarMissoes('telegram')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>

    <!--
      Botão "Ver Serviços": exibe os serviços publicados no Telegram.
    -->
    <button class="action-button" onclick="viewServices('telegram')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Container com as estatísticas da empresa "Telegram".
    Segue a mesma estrutura do bloco anterior.
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Canais Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Canais Ativos</span>
      <span class="stat-value" id="telegram-canais">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="telegram-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="telegram-nivel">Criador de Grupo</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="telegram-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="telegram-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="telegram-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "Telegram".
    Segue a mesma estrutura do bloco anterior.
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="telegram-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="telegram-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "Telegram".
-->
</div>

<!--
  Início do cartão da empresa "TikTok".
  Segue a mesma estrutura dos cartões anteriores.
-->
<div class="nav-card company-card fade-in" data-card-id="tiktok">
  <!--
    Ícone e título da empresa "TikTok".
  -->
  <i class="fab fa-tiktok" style="color: #000000;"></i>
  <h3>TikTok</h3>

  <!--
    Botões de ação para a empresa "TikTok".
  -->
  <div class="company-actions">
    <button class="action-button" onclick="openPublishModal('tiktok', 'TikTok', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>
    <button class="action-button" onclick="executarMissoes('tiktok')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>
    <button class="action-button" onclick="viewServices('tiktok')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Estatísticas da empresa "TikTok".
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Curtidas Recebidas".
    -->
    <div class="stat-item">
      <span class="stat-label">Curtidas Recebidas</span>
      <span class="stat-value" id="tiktok-curtidas">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="tiktok-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="tiktok-nivel">Criador Iniciante</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="tiktok-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="tiktok-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="tiktok-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "TikTok".
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="tiktok-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="tiktok-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "TikTok".
-->
</div>

<!--
  Início do cartão da empresa "Marketing de Vídeo".
  Segue a mesma estrutura dos cartões anteriores.
-->
<div class="nav-card company-card fade-in" data-card-id="video">
  <i class="fas fa-video" style="color: #FF0000;"></i>
  <h3>Marketing de Vídeo</h3>

  <!--
    Botões de ação para a empresa "Marketing de Vídeo".
  -->
  <div class="company-actions">
    <button class="action-button" onclick="openPublishModal('video', 'Marketing de Vídeo', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>
    <button class="action-button" onclick="executarMissoes('video')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>
    <button class="action-button" onclick="viewServices('video')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Estatísticas da empresa "Marketing de Vídeo".
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Campanhas Publicadas".
    -->
    <div class="stat-item">
      <span class="stat-label">Campanhas Publicadas</span>
      <span class="stat-value" id="video-campanhas">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="video-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="video-nivel">Editor Júnior</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="video-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="video-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="video-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "Marketing de Vídeo".
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="video-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="video-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "Marketing de Vídeo".
-->
</div>

<!--
  Início do cartão da empresa "Discord".
  Segue a mesma estrutura dos cartões anteriores.
-->
<div class="nav-card company-card fade-in" data-card-id="discord">
  <i class="fab fa-discord" style="color: #7289DA;"></i>
  <h3>Discord</h3>

  <!--
    Botões de ação para a empresa "Discord".
  -->
  <div class="company-actions">
    <button class="action-button" onclick="openPublishModal('discord', 'Discord', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>
    <button class="action-button" onclick="executarMissoes('discord')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>
    <button class="action-button" onclick="viewServices('discord')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Estatísticas da empresa "Discord".
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Servidores Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Servidores Ativos</span>
      <span class="stat-value" id="discord-servidores">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="discord-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="discord-nivel">Moderador Iniciante</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="discord-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="discord-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="discord-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "Discord".
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="discord-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="discord-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "Discord".
-->
</div>

<!--
  Início do cartão da empresa "Comente em outros Blogs".
  Segue a mesma estrutura dos cartões anteriores.
-->
<div class="nav-card company-card fade-in" data-card-id="blog">
  <i class="fas fa-blog" style="color: #FF9800;"></i>
  <h3>Comente em outros Blogs</h3>

  <!--
    Botões de ação para a empresa "Comente em outros Blogs".
  -->
  <div class="company-actions">
    <button class="action-button" onclick="openPublishModal('blog', 'Comente em outros Blogs', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>
    <button class="action-button" onclick="executarMissoes('blog')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>
    <button class="action-button" onclick="viewServices('blog')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Estatísticas da empresa "Comente em outros Blogs".
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Comentários Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Comentários Publicados</span>
      <span class="stat-value" id="blog-comentarios">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="blog-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="blog-nivel">Leitor Participativo</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="blog-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="blog-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="blog-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "Comente em outros Blogs".
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="blog-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="blog-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "Comente em outros Blogs".
-->
</div>

<!--
  Início do cartão da empresa "Reddit".
  Segue a mesma estrutura dos cartões anteriores.
-->
<div class="nav-card company-card fade-in" data-card-id="reddit">
  <i class="fab fa-reddit" style="color: #FF4500;"></i>
  <h3>Reddit</h3>

  <!--
    Botões de ação para a empresa "Reddit".
  -->
  <div class="company-actions">
    <button class="action-button" onclick="openPublishModal('reddit', 'Reddit', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>
    <button class="action-button" onclick="executarMissoes('reddit')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>
    <button class="action-button" onclick="viewServices('reddit')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Estatísticas da empresa "Reddit".
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Upvotes Recebidos".
    -->
    <div class="stat-item">
      <span class="stat-label">Upvotes Recebidos</span>
      <span class="stat-value" id="reddit-upvotes">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="reddit-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="reddit-nivel">Explorador de Tópicos</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="reddit-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="reddit-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="reddit-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "Reddit".
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="reddit-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="reddit-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "Reddit".
-->
</div>














         <!--
  Cartão da empresa "SEO, Promover Conteúdo" no modo empresarial.
  - `nav-card`: Classe para o cartão de navegação.
  - `company-card`: Classe para cartões de empresas.
  - `fade-in`: Classe para animação de aparecimento suave.
  - `data-card-id="seo"`: Identificador único para este cartão, usado em JavaScript.
-->
<div class="nav-card company-card fade-in" data-card-id="seo">
  <!--
    Ícone e título da empresa "SEO, Promover Conteúdo".
    - `fas fa-search`: Classe do Font Awesome para o ícone de busca.
    - `style="color: #4285F4;"`: Define a cor do ícone.
  -->
  <i class="fas fa-search" style="color: #4285F4;"></i>
  <h3>SEO, Promover Conteúdo</h3>

  <!--
    Container com os botões de ação para a empresa "SEO, Promover Conteúdo".
    Cada botão executa uma função JavaScript específica ao ser clicado.
  -->
  <div class="company-actions">
    <!--
      Botão "Contratar": abre o modal para publicar um serviço de SEO.
      - `onclick="openPublishModal('seo', 'SEO, Promover Conteúdo', 'empresarial')"`: Chama a função para abrir o modal de publicação.
    -->
    <button class="action-button" onclick="openPublishModal('seo', 'SEO, Promover Conteúdo', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>

    <!--
      Botão "Executar Missões": leva o usuário para a seção de missões de SEO.
    -->
    <button class="action-button" onclick="executarMissoes('seo')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>

    <!--
      Botão "Ver Serviços": exibe os serviços publicados de SEO.
    -->
    <button class="action-button" onclick="viewServices('seo')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Container com as estatísticas da empresa "SEO, Promover Conteúdo".
    Cada estatística é exibida em uma linha, com um rótulo e um valor.
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Palavras-chave Otimizadas".
      - `stat-label`: Classe para o texto descritivo.
      - `stat-value`: Classe para o valor numérico ou descritivo.
      - `id="seo-palavras"`: Identificador único para que o JavaScript possa atualizar este valor dinamicamente.
    -->
    <div class="stat-item">
      <span class="stat-label">Palavras-chave Otimizadas</span>
      <span class="stat-value" id="seo-palavras">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
      Golds são a moeda virtual usada na plataforma.
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="seo-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
      Indica o nível ou classificação do usuário nesta categoria.
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="seo-nivel">Analista de Busca</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
      Quantidade de serviços que o usuário já publicou nesta categoria.
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="seo-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
      Quantidade de serviços ativos (em andamento) nesta categoria.
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="seo-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
      Quantidade de serviços pendentes (aguardando ação) nesta categoria.
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="seo-pending">0</span>
    </div>
  </div>

  <!--
    Container que exibe o progresso do usuário em relação a uma meta.
    - `nivel-progress`: Classe para o container geral.
    - `progress-bar`: Classe para a barra de progresso (fundo cinza).
    - `progress-fill`: Classe para a parte preenchida da barra (cor azul).
    - `progress-text`: Classe para o texto que exibe o progresso atual (ex: "0 / 250.000").
  -->
  <div class="nivel-progress">
    <!--
      Barra de progresso visual.
      - A largura da parte preenchida (`style="width: 0%"`) é atualizada dinamicamente via JavaScript.
    -->
    <div class="progress-bar">
      <div class="progress-fill" id="seo-progress" style="width: 0%"></div>
    </div>
    <!--
      Texto que exibe o progresso atual em formato numérico (ex: "0 / 250.000").
      - `id="seo-progress-text"`: Identificador único para atualização dinâmica.
    -->
    <span class="progress-text" id="seo-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "SEO, Promover Conteúdo".
-->
</div>

<!--
  Cartão da empresa "Serviços Internacionais" no modo empresarial.
  Segue a mesma estrutura do cartão anterior.
-->
<div class="nav-card company-card fade-in" data-card-id="inscricoes">
  <!--
    Ícone e título da empresa "Serviços Internacionais".
    - `fas fa-rss`: Classe do Font Awesome para o ícone de feed RSS.
    - `style="color: #FF9800;"`: Define a cor do ícone.
  -->
  <i class="fas fa-rss" style="color: #FF9800;"></i>
  <h3>Serviços Internacionais</h3>

  <!--
    Botões de ação para a empresa "Serviços Internacionais".
  -->
  <div class="company-actions">
    <!--
      Botão "Contratar": abre o modal para publicar um serviço internacional.
    -->
    <button class="action-button" onclick="openPublishModal('inscricoes', 'Serviços Internacionais', 'empresarial')">
      <i class="fas fa-handshake"></i> Contratar
    </button>

    <!--
      Botão "Executar Missões": leva o usuário para a seção de missões internacionais.
    -->
    <button class="action-button" onclick="executarMissoes('inscricoes')">
      <i class="fas fa-tasks"></i> Executar Missões
    </button>

    <!--
      Botão "Ver Serviços": exibe os serviços publicados internacionais.
    -->
    <button class="action-button" onclick="viewServices('inscricoes')">
      <i class="fas fa-eye"></i> Ver Serviços
    </button>
  </div>

  <!--
    Estatísticas da empresa "Serviços Internacionais".
  -->
  <div class="company-stats">
    <!--
      Item de estatística: "Inscrições Ativas".
    -->
    <div class="stat-item">
      <span class="stat-label">Inscrições Ativas</span>
      <span class="stat-value" id="inscricoes-ativas">0</span>
    </div>

    <!--
      Item de estatística: "Golds Acumulados".
    -->
    <div class="stat-item">
      <span class="stat-label">Golds Acumulados</span>
      <span class="stat-value" id="inscricoes-golds">0</span>
    </div>

    <!--
      Item de estatística: "Nível Global".
    -->
    <div class="stat-item">
      <span class="stat-label">Nível Global</span>
      <span class="stat-value" id="inscricoes-nivel">Membro Iniciante</span>
    </div>

    <!--
      Item de estatística: "Serviços Publicados".
    -->
    <div class="stat-item">
      <span class="stat-label">Serviços Publicados</span>
      <span class="stat-value" id="inscricoes-published">0</span>
    </div>

    <!--
      Item de estatística: "Ativos".
    -->
    <div class="stat-item">
      <span class="stat-label">Ativos</span>
      <span class="stat-value" id="inscricoes-active">0</span>
    </div>

    <!--
      Item de estatística: "Pendentes".
    -->
    <div class="stat-item">
      <span class="stat-label">Pendentes</span>
      <span class="stat-value" id="inscricoes-pending">0</span>
    </div>
  </div>

  <!--
    Barra de progresso do nível global para a empresa "Serviços Internacionais".
  -->
  <div class="nivel-progress">
    <div class="progress-bar">
      <div class="progress-fill" id="inscricoes-progress" style="width: 0%"></div>
    </div>
    <span class="progress-text" id="inscricoes-progress-text">0 / 250.000</span>
  </div>
<!--
  Fim do cartão da empresa "Serviços Internacionais".
-->
</div>
<!--
  Fim do container do carrossel de empresas no modo empresarial.
-->
          </div>
        </div>
      </div>
    </section>

    <!--
      Linha horizontal para separar visualmente as seções.
      - `style="border: 0; border-top: 1px solid var(--border); margin: 2rem 0;"`: Define o estilo da linha.
    -->
    <hr style="border: 0; border-top: 1px solid var(--border); margin: 2rem 0;">

    <!--
      Seção "Modo Pessoal": permite ao usuário publicar serviços pessoais e executar missões.
      - `dashboard-section`: Classe para a seção do dashboard.
      - `fade-in`: Classe para animação de aparecimento suave.
    -->
    <section id="dashboard-section-pessoal" class="dashboard-section fade-in">
      <div id="pessoalSection">
        <!--
          Título da seção, com ícone de usuário (Font Awesome).
        -->
        <h2><i class="fas fa-user"></i>Modo Pessoal</h2>
        <!--
          Descrição da seção, informando ao usuário o que ele pode fazer aqui.
        -->
        <p style="margin-bottom: 0.75rem; color: var(--text-secondary); font-size: 0.85rem;">
          Publique seus pedidos pessoais e realize missões.
        </p>
        <!--
          Container do carrossel de serviços pessoais.
          Permite ao usuário navegar horizontalmente entre os cartões dos serviços.
        -->
        <div class="carousel-container">
          <div class="carousel" id="company-carousel-pessoal">
            <!--
              Cartão do serviço "Micro Influenciador do Facebook" no modo pessoal.
              Cada cartão representa um serviço pessoal e exibe suas informações e estatísticas.
              - `fade-in`: Classe para animação de aparecimento suave.
              - `data-card-id="facebook-pessoal"`: Identificador único para este cartão.
            -->
            <div class="nav-card company-card fade-in" data-card-id="facebook-pessoal">
              <!--
                Ícone e título do serviço "Micro Influenciador do Facebook".
              -->
              <i class="fab fa-facebook" style="color: #1877f2;"></i>
              <h3>Micro Influenciador do Facebook</h3>

              <!--
                Botões de ação para o serviço "Micro Influenciador do Facebook" no modo pessoal.
                Cada botão chama uma função JavaScript específica.
              -->
              <div class="company-actions">
                <!--
                  Botão "Publicar Serviço": abre o modal para publicar um serviço pessoal no Facebook.
                -->
                <button class="action-button" onclick="openPublishModal('facebook', 'Micro Influenciador do Facebook', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>

                <!--
                  Botão "Executar Missões": leva o usuário para a seção de missões do Facebook.
                -->
                <button class="action-button" onclick="executarMissoes('facebook')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>

                <!--
                  Botão "Ver Serviços Publicados": exibe os serviços publicados pelo usuário no Facebook.
                -->
                <button class="action-button" onclick="viewUserServices('facebook')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>

              <!--
                Estatísticas do serviço "Micro Influenciador do Facebook" no modo pessoal.
              -->
              <div class="company-stats">
                <!--
                  Item de estatística: "Golds Acumulados".
                -->
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="facebook-golds-pessoal">0</span>
                </div>

                <!--
                  Item de estatística: "Nível Global".
                -->
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="facebook-nivel-pessoal">Iniciante de Campanha</span>
                </div>

                <!--
                  Item de estatística: "Colaboradores".
                -->
                <div class="stat-item">
                  <span class="stat-label">Colaboradores</span>
                  <span class="stat-value" id="facebook-seguidores-pessoal">0</span>
                </div>

                <!--
                  Item de estatística: "Serviços Publicados".
                -->
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="facebook-published-pessoal">0</span>
                </div>

                <!--
                  Item de estatística: "Ativos".
                -->
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="facebook-active-pessoal">0</span>
                </div>

                <!--
                  Item de estatística: "Pendentes".
                -->
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="facebook-pending-pessoal">0</span>
                </div>
              </div>

              <!--
                Barra de progresso do nível global para o serviço "Micro Influenciador do Facebook" no modo pessoal.
              -->
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="facebook-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="facebook-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Micro Influenciador do Instagram" no modo pessoal.
              Segue a mesma estrutura do cartão do Facebook pessoal.
            -->
            <div class="nav-card company-card fade-in" data-card-id="instagram-pessoal">
              <i class="fab fa-instagram" style="color: #e4405f;"></i>
              <h3>Micro Influenciador do Instagram</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('instagram', 'Micro Influenciador do Instagram', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('instagram')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('instagram')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="instagram-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="instagram-nivel-pessoal">Estagiário de Conteúdo</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Seguidores</span>
                  <span class="stat-value" id="instagram-seguidores-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="instagram-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="instagram-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="instagram-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="instagram-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="instagram-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Aplicativo Móvel" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="mobile-pessoal">
              <i class="fas fa-mobile-alt" style="color: #4CAF50;"></i>
              <h3>Aplicativo Móvel</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('mobile', 'Aplicativo Móvel', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('mobile')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('mobile')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Total de Instalações</span>
                  <span class="stat-value" id="mobile-instalacoes-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="mobile-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="mobile-nivel-pessoal">Programador Iniciante</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="mobile-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="mobile-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="mobile-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="mobile-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="mobile-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Telegram" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="telegram-pessoal">
              <i class="fab fa-telegram" style="color: #0088cc;"></i>
              <h3>Telegram</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('telegram', 'Telegram', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('telegram')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('telegram')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Canais Ativos</span>
                  <span class="stat-value" id="telegram-canais-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="telegram-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="telegram-nivel-pessoal">Criador de Grupo</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="telegram-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="telegram-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="telegram-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="telegram-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="telegram-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "TikTok" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="tiktok-pessoal">
              <i class="fab fa-tiktok" style="color: #000000;"></i>
              <h3>TikTok</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('tiktok', 'TikTok', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('tiktok')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('tiktok')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Curtidas Recebidas</span>
                  <span class="stat-value" id="tiktok-curtidas-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="tiktok-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="tiktok-nivel-pessoal">Criador Iniciante</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="tiktok-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="tiktok-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="tiktok-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="tiktok-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="tiktok-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Marketing de Vídeo" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="video-pessoal">
              <i class="fas fa-video" style="color: #FF0000;"></i>
              <h3>Marketing de Vídeo</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('video', 'Marketing de Vídeo', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('video')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('video')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Campanhas Publicadas</span>
                  <span class="stat-value" id="video-campanhas-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="video-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="video-nivel-pessoal">Editor Júnior</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="video-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="video-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="video-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="video-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="video-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Discord" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="discord-pessoal">
              <i class="fab fa-discord" style="color: #7289DA;"></i>
              <h3>Discord</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('discord', 'Discord', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('discord')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('discord')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Servidores Ativos</span>
                  <span class="stat-value" id="discord-servidores-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="discord-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="discord-nivel-pessoal">Moderador Iniciante</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="discord-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="discord-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="discord-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="discord-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="discord-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Comente em outros Blogs" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="blog-pessoal">
              <i class="fas fa-blog" style="color: #FF9800;"></i>
              <h3>Comente em outros Blogs</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('blog', 'Comente em outros Blogs', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('blog')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('blog')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Comentários Publicados</span>
                  <span class="stat-value" id="blog-comentarios-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="blog-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="blog-nivel-pessoal">Leitor Participativo</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="blog-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="blog-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="blog-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="blog-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="blog-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Reddit" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="reddit-pessoal">
              <i class="fab fa-reddit" style="color: #FF4500;"></i>
              <h3>Reddit</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('reddit', 'Reddit', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('reddit')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('reddit')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Upvotes Recebidos</span>
                  <span class="stat-value" id="reddit-upvotes-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="reddit-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="reddit-nivel-pessoal">Explorador de Tópicos</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="reddit-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="reddit-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="reddit-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="reddit-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="reddit-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "SEO, Promover Conteúdo" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="seo-pessoal">
              <i class="fas fa-search" style="color: #4285F4;"></i>
              <h3>SEO, Promover Conteúdo</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('seo', 'SEO, Promover Conteúdo', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('seo')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('seo')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Palavras-chave Otimizadas</span>
                  <span class="stat-value" id="seo-palavras-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="seo-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="seo-nivel-pessoal">Analista de Busca</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="seo-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="seo-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="seo-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="seo-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="seo-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>

            <!--
              Cartão do serviço "Serviços Internacionais" no modo pessoal.
              Segue a mesma estrutura dos cartões anteriores.
            -->
            <div class="nav-card company-card fade-in" data-card-id="inscricoes-pessoal">
              <i class="fas fa-rss" style="color: #FF9800;"></i>
              <h3>Serviços Internacionais</h3>
              <div class="company-actions">
                <button class="action-button" onclick="openPublishModal('inscricoes', 'Serviços Internacionais', 'pessoal')">
                  <i class="fas fa-plus"></i> Publicar Serviço
                </button>
                <button class="action-button" onclick="executarMissoes('inscricoes')">
                  <i class="fas fa-tasks"></i> Executar Missões
                </button>
                <button class="action-button" onclick="viewUserServices('inscricoes')">
                  <i class="fas fa-eye"></i> Ver Serviços Publicados
                </button>
              </div>
              <div class="company-stats">
                <div class="stat-item">
                  <span class="stat-label">Inscrições Ativas</span>
                  <span class="stat-value" id="inscricoes-ativas-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Golds Acumulados</span>
                  <span class="stat-value" id="inscricoes-golds-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Nível Global</span>
                  <span class="stat-value" id="inscricoes-nivel-pessoal">Membro Iniciante</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Serviços Publicados</span>
                  <span class="stat-value" id="inscricoes-published-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ativos</span>
                  <span class="stat-value" id="inscricoes-active-pessoal">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Pendentes</span>
                  <span class="stat-value" id="inscricoes-pending-pessoal">0</span>
                </div>
              </div>
              <div class="nivel-progress">
                <div class="progress-bar">
                  <div class="progress-fill" id="inscricoes-progress-pessoal" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="inscricoes-progress-text-pessoal">0 / 250.000</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!--
    Banner de cookies: solicita permissão para usar cookies.
    Inicialmente escondido, será exibido ao carregar a página.
  -->
  <div id="cookieBanner" class="cookie-banner">
    <!--
      Conteúdo do banner: mensagem informativa sobre o uso de cookies.
    -->
    <div class="content">
      <p>
        Usamos cookies para otimizar sua experiência e analisar o tráfego do site.
        Ao continuar, você concorda com nossa <a href="#" target="_blank">política de privacidade</a>.
      </p>
    </div>
    <!--
      Botões para aceitar ou recusar o uso de cookies.
    -->
    <div class="buttons">
      <!--
        Botão "Aceitar": ao clicar, o banner é fechado e os cookies são aceitos.
      -->
      <button id="cookie-accept" class="accept">Aceitar</button>
      <!--
        Botão "Recusar": ao clicar, o banner é fechado e os cookies são recusados.
      -->
      <button id="cookie-decline" class="decline">Recusar</button>
    </div>
  </div>

  
  
  
  
  
  
  
  
  
  
  
  
<footer id="userInfoFooter">
    Usuário: <span id="footerUserName">Carregando...</span> | ID: <span id="footerUserId">---</span>
  </footer>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>
<script>

// ====================================================================
// 🧠 NOVO SISTEMA DE REFERÊNCIAS FIREBASE (BASEADO NA NOVA ESTRUTURA)
// ====================================================================

// Inicializa o Firebase id 3
const firebaseConfig = {
    apiKey: "AIzaSyDbxygCeFLDbf6Ge6YZHJqq0VvlSSfbc_I",
    authDomain: "yshippcommerce.firebaseapp.com",
    projectId: "yshippcommerce",
    storageBucket: "yshippcommerce.appspot.com",
    messagingSenderId: "680576769517",
    appId: "1:680576769517:web:ace30d8e451ee70511dbe4"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();

// Funções Auxiliares de Referência para a nova estrutura
function refWalletUsuario(uid) { 
    return db.collection('bankCentral').doc('wallets_usuarios').collection('usuarios').doc(uid); 
} 
function refWalletEmpresa(empresaId) { 
    return db.collection('bankCentral').doc('wallets_empresas').collection('empresas').doc(empresaId); 
} 
function refAtivosEmpresa(empresaId) { 
    return db.collection('bankCentral').doc('ativos_empresas').collection('empresas').doc(empresaId); 
} 
function refBCReserve() { 
    return db.collection('bankCentral').doc('reserve'); 
}
function refBCCoins() {
    return db.collection('bankCentral').doc('moedas'); 
}
function refServiceEmpresarial(empresaId) {
    // Cria uma referência para uma nova coleção dentro de services_empresarial, sem um ID final ainda.
    return db.collection('companies').doc('services_empresarial').collection(`${empresaId}_services`);
}
function refServicePessoal(userId) {
    // A nova estrutura usa 'usuarios' para serviços pessoais.
    return db.collection('companies').doc('services_pessoal').collection('usuarios');
}
function refCompanyProfile(companyId) {
    // O perfil principal da empresa está agora em companies/modo_empresarial
    return db.collection('companies').doc('modo_empresarial').collection('empresas').doc(companyId);
}
// OBS: 'companies/{cardId}' na lógica antiga deve ser substituído por refCompanyProfile(cardId)
// para interagir com dados da empresa (ex: contadores).

document.addEventListener('DOMContentLoaded', () => {
    if (!firebase.auth) {
        console.error("❌ Firebase Auth não carregado.");
        showNotification("Erro: Firebase Auth não inicializado.");
        return;
    }
    console.log("✅ Firebase Auth carregado.");
    auth.onAuthStateChanged(user => {
        if (user) {
            console.log("✅ Usuário logado:", user.uid);
        } else {
            console.warn("❌ Nenhum usuário logado. Redirecionando para cadastro.html.");
            window.location.href = "cadastro.html";
        }
    });
});
  // ====================================================================
  // 1. CONSTANTES GLOBAIS (NOVO/AJUSTADO)
  // ====================================================================
  let selectedCompanyId = null;
  let currentMode = 'empresarial'; // Variável global para o modo id do comentário 1

  // Definição das novas taxas e constantes para clareza  id 2
  const GOLD_TO_REAL = 1000;
  const TAX_PERSONAL = 0.05; // 5%
  const TAX_EMPRESARIAL = 0.10; // 10%
  const COMPANY_SHARE_RATIO = 0.5; // 50/50 split

  // OBS: BASE_REWARD e FIXED_FEE antigos são mantidos (mas não usados na nova lógica de fee)
  // para evitar quebras em outras partes do código que possam depender delas.

  // O bloco de inicialização do Firebase foi movido para o topo, antes das referências auxiliares.
  
  // Variáveis globais id 4
  let currentUser = null;
  let walletData = { goldsBalance: 0, reaisBalance: 0, name: "Usuário", id: "..." };

 // ===============================
// 💰 SISTEMA DE FORMATAÇÃO DE VALORES (id 5)
// ===============================
// Este bloco define formatações numéricas padronizadas para todo o sistema YshippCommerce.
// Ele garante que os valores de Golds, Reais e números grandes sejam exibidos de forma clara
// para os usuários brasileiros (com ponto como separador de milhar).

// 🔸 Formata valor com até 2 casas decimais (ex: 1.234,56)
const GOLD_FORMAT = new Intl.NumberFormat('pt-BR', { 
  minimumFractionDigits: 0, 
  maximumFractionDigits: 2 
});

// 🔸 Formata valor sem casas decimais (ex: 1.234)
const GOLD_FORMAT_NO_DECIMAL = new Intl.NumberFormat('pt-BR', { 
  minimumFractionDigits: 0, 
  maximumFractionDigits: 0 
});

// 🔸 (Opcional) Formata valor com símbolo de moeda (ex: R$ 1.234,56)
const REAL_FORMAT = new Intl.NumberFormat('pt-BR', { 
  style: 'currency', 
  currency: 'BRL' 
});

// ===============================
// 🪙 FUNÇÕES AUXILIARES
// ===============================

// Formata número para exibição como "1.000 Golds"
function formatGolds(value) {
  return `${GOLD_FORMAT_NO_DECIMAL.format(value)} Golds`;
}

// Converte Golds em Reais (1 Gold = R$1 como exemplo; ajustar taxa se houver)
function goldsToReais(golds, taxaConversao = 1) {
  const valorReais = golds * taxaConversao;
  return REAL_FORMAT.format(valorReais);
}

  /**
   * Função auxiliar para formatar Golds id 6
   * @param {number} value
   * @param {boolean} includeDecimals
   * @returns {string}
   */
  function formatGold(value, includeDecimals = true) {
      if (value === undefined || value === null) return "0";
      const numericValue = parseFloat(value);
      if (isNaN(numericValue)) return "0";
      return includeDecimals ? GOLD_FORMAT.format(numericValue) : GOLD_FORMAT_NO_DECIMAL.format(numericValue);
  }

  auth.onAuthStateChanged(async (user) => {
    if (user) {
      currentUser = user;
      // 🎯 ATUALIZAÇÃO: Nova referência para a carteira do usuário
      const walletRef = refWalletUsuario(user.uid); 
      const snap = await walletRef.get();
      if (snap.exists) {
        walletData = { ...snap.data(), id: user.uid };
        console.log("💰 Carteira carregada:", walletData);
      } else {
        console.warn("⚠️ Nenhuma carteira encontrada para este usuário.");
        walletData = { goldsBalance: 0, reaisBalance: 0, name: "Usuário", id: user.uid };
      }
    } else {
      console.warn("❌ Nenhum usuário autenticado.");
      walletData = { goldsBalance: 0, reaisBalance: 0, name: "Usuário", id: "..." };
    }
  });

  // Definição dos níveis globais e metas para cada card (mantido) id 7
  const niveisGlobais = {
// ... (niveisGlobais mantido) ...
    facebook: [
      { nivel: 1, nome: "Iniciante de Campanha", golds: 250000 },
      { nivel: 2, nome: "Gestor de Engajamento", golds: 500000 },
      { nivel: 3, nome: "Líder de Audiência", golds: 900000 },
      { nivel: 4, nome: "Diretor de Mídia Social", golds: 1500000 },
      { nivel: 5, nome: "Executivo Global de Influência", golds: 5000000 }
    ],
    instagram: [
      { nivel: 1, nome: "Estagiário de Conteúdo", golds: 250000 },
      { nivel: 2, nome: "Analista de Engajamento", golds: 500000 },
      { nivel: 3, nome: "Gestor de Parcerias", golds: 900000 },
      { nivel: 4, nome: "Diretor de Imagem Digital", golds: 1500000 },
      { nivel: 5, nome: "Embaixador Global de Influência", golds: 5000000 }
    ],
    mobile: [
      { nivel: 1, nome: "Programador Iniciante", golds: 250000 },
      { nivel: 2, nome: "Desenvolvedor de Interface", golds: 500000 },
      { nivel: 3, nome: "Arquiteto de Aplicações", golds: 900000 },
      { nivel: 4, nome: "Diretor Mobile", golds: 1500000 },
      { nivel: 5, nome: "Visionário Global de Tecnologia", golds: 5000000 }
    ],
    telegram: [
      { nivel: 1, nome: "Criador de Grupo", golds: 250000 },
      { nivel: 2, nome: "Gestor de Comunidade", golds: 500000 },
      { nivel: 3, nome: "Curador de Conteúdo", golds: 900000 },
      { nivel: 4, nome: "Diretor de Comunicação Digital", golds: 1500000 },
      { nivel: 5, nome: "Embaixador Global de Conexões", golds: 5000000 }
    ],
    tiktok: [
      { nivel: 1, nome: "Criador Iniciante", golds: 250000 },
      { nivel: 2, nome: "Influenciador Emergente", golds: 500000 },
      { nivel: 3, nome: "Gestor de Tendências", golds: 900000 },
      { nivel: 4, nome: "Diretor de Conteúdo Viral", golds: 1500000 },
      { nivel: 5, nome: "Ícone Global de Criatividade", golds: 5000000 }
    ],
    video: [
      { nivel: 1, nome: "Editor Júnior", golds: 250000 },
      { nivel: 2, nome: "Gestor de Campanha", golds: 500000 },
      { nivel: 3, nome: "Produtor Audiovisual", golds: 900000 },
      { nivel: 4, nome: "Diretor de Estratégia Visual", golds: 1500000 },
      { nivel: 5, nome: "Mestre Global de Conteúdo", golds: 5000000 }
    ],
    discord: [
      { nivel: 1, nome: "Moderador Iniciante", golds: 250000 },
      { nivel: 2, nome: "Gestor de Servidor", golds: 500000 },
      { nivel: 3, nome: "Líder de Comunidade", golds: 900000 },
      { nivel: 4, nome: "Diretor de Ecossistema Digital", golds: 1500000 },
      { nivel: 5, nome: "Executivo Global de Interação", golds: 5000000 }
    ],
    blog: [
      { nivel: 1, nome: "Leitor Participativo", golds: 250000 },
      { nivel: 2, nome: "Colaborador Ativo", golds: 500000 },
      { nivel: 3, nome: "Embaixador de Discussões", golds: 900000 },
      { nivel: 4, nome: "Diretor de Comunidades Digitais", golds: 1500000 },
      { nivel: 5, nome: "Crítico Global de Conteúdo", golds: 5000000 }
    ],
    reddit: [
      { nivel: 1, nome: "Explorador de Tópicos", golds: 250000 },
      { nivel: 2, nome: "Criador de Discussões", golds: 500000 },
      { nivel: 3, nome: "Líder de Subcomunidade", golds: 900000 },
      { nivel: 4, nome: "Diretor de Engajamento Global", golds: 1500000 },
      { nivel: 5, nome: "Mestre Mundial de Interação", golds: 5000000 }
    ],
    seo: [
      { nivel: 1, nome: "Analista de Busca", golds: 250000 },
      { nivel: 2, nome: "Gestor de Tráfego", golds: 500000 },
      { nivel: 3, nome: "Diretor de Performance", golds: 900000 },
      { nivel: 4, nome: "Estrategista Global de Marketing", golds: 1500000 },
      { nivel: 5, nome: "Arquiteto Supremo de Engajamento", golds: 5000000 }
    ],
    inscricoes: [
      { nivel: 1, nome: "Membro Iniciante", golds: 250000 },
      { nivel: 2, nome: "Participante Dedicado", golds: 500000 },
      { nivel: 3, nome: "Colaborador Premium", golds: 900000 },
      { nivel: 4, nome: "Líder de Comunidade", golds: 1500000 },
      { nivel: 5, nome: "Sócio Global Yshipp", golds: 5000000 }
    ]
  };

 // =============================================
// 🎯 SISTEMA DE SUBCATEGORIAS DE SERVIÇOS (id 8)
// ... (subcategorias mantido) ...
// =============================================
// Este bloco define todas as tarefas disponíveis dentro do YshippCommerce.
// Cada subcategoria representa uma “missão” que um usuário pode realizar
// em plataformas como Facebook, Instagram, TikTok, etc.
//
// 💡 Cada tarefa tem:
// - nome: nome visível da ação
// - goldsBase: valor base em Golds que o usuário ganha por completá-la
// - dificuldade: classifica o esforço exigido (“Simples”, “Intermediário”, “Complexo”)

// ===============================
// 🔹 Definição de dificuldades padronizadas
// ===============================
const DIFICULDADE = {
    SIMPLES: "Simples",
    INTERMEDIARIO: "Intermediário",
    COMPLEXO: "Complexo"
};

// ===============================
// 🔹 Definição principal das subcategorias
// ===============================
const subcategorias = {
    // 📨 Tarefas de inscrição e cadastros simples
    inscricoes: [
        { nome: "Somente envio de e-mail", goldsBase: 150, dificuldade: DIFICULDADE.SIMPLES },
        { nome: "Cadastro simples", goldsBase: 300, dificuldade: DIFICULDADE.SIMPLES },
        { nome: "Inscrição complexa", goldsBase: 1000, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 📘 Tarefas do Facebook (ações sociais e de engajamento)
    facebook: [
        { nome: "Curtir no Facebook", goldsBase: 150, dificuldade: DIFICULDADE.FACIL },
        { nome: "Curtidas no Facebook (mais de 50 amigos)", goldsBase: 1200, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Curtidas no Facebook (mais de 100 amigos)", goldsBase: 1500, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Curtidas no Facebook (mais de 300 amigos)", goldsBase: 2000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Adicionar comentário à conversa existente", goldsBase: 1500, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Adicione-me como amigo", goldsBase: 2000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Junte-se a um grupo", goldsBase: 1500, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Mude sua foto de perfil (por 1 semana)", goldsBase: 3000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Postar no Mural", goldsBase: 2000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Curtir + Comentar + Publicar no Mural", goldsBase: 5000, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 📸 Ações no Instagram
    instagram: [
        { nome: "Seguir", goldsBase: 1000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Curtir", goldsBase: 1000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Comentário", goldsBase: 1500, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "Seguir + Curtir + Comentar", goldsBase: 3500, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 📱 Aplicativos mobile
    mobile: [
        { nome: "Somente download", goldsBase: 500, dificuldade: DIFICULDADE.SIMPLES },
        { nome: "Baixar + Instalar + Testar + Revisão", goldsBase: 1500, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 💬 Telegram (bots, grupos e airdrops)
    telegram: [
        { nome: "Bot Junte-se", goldsBase: 500, dificuldade: DIFICULDADE.SIMPLES },
        { nome: "Airdrop simples", goldsBase: 1000, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 🎥 TikTok e vídeos curtos
    tiktok: [
        { nome: "Assistir + Curtir + Comentar + Compartilhar", goldsBase: 4000, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 📺 YouTube e vídeos longos
    video: [
        { nome: "Assista ao vídeo (6 min)", goldsBase: 1000, dificuldade: DIFICULDADE.SIMPLES },
        { nome: "Inscreva-se no canal", goldsBase: 2000, dificuldade: DIFICULDADE.INTERMEDIARIO }
    ],
    
    // 💻 SEO e engajamento em conteúdo web
    seo: [
        { nome: "SEO + Promover conteúdo + Engajar 1x", goldsBase: 2000, dificuldade: DIFICULDADE.INTERMEDIARIO },
        { nome: "SEO + Promover conteúdo + Tarefas 5x extensas", goldsBase: 7000, dificuldade: DIFICULDADE.COMPLEXO }
    ]
};

// ===============================
// 🧠 Função auxiliar: obter lista de tarefas de uma categoria
// ===============================
// Retorna todas as tarefas disponíveis em uma categoria (ex: facebook, instagram)
function getSubcategoriasPorPlataforma(plataforma) {
    return subcategorias[plataforma] || [];
}

  // Variáveis globais para controle do modal e dados id 8
  let currentCompanyId = null;
  let currentCompanyName = null;
  let currentStep = 1;
  const totalSteps = 4;
  let serviceSteps = [{ id: 1, description: "" }];
  const BASE_REWARD = 150; // Golds base por tarefa (mantido, mas pode ser removido) id 9
  const FIXED_FEE = 50; // Taxa fixa adicional em Golds (mantido, mas não usado na nova lógica) id 10

  /**
   * FUNÇÕES DO FLUXO GUIADO
   */

  // Função para calcular a recompensa por freelancer com base na complexidade (mantido, com nota de melhoria) id 11
  function calculateRewardPerFreelancer() {
// ... (calculateRewardPerFreelancer mantido) ...
      let baseReward = BASE_REWARD;
      const totalSteps = serviceSteps.length;

      // ... Lógica de cálculo de recompensa por passos (mantida) ... id 12

      let calculatedReward = baseReward;
      const subcategorySelect = document.getElementById("subcategory");
      const selectedOption = subcategorySelect.options[subcategorySelect.selectedIndex];
      if (selectedOption && selectedOption.dataset.goldsBase) {
          const subcategoryGolds = parseFloat(selectedOption.dataset.goldsBase);
          calculatedReward = subcategoryGolds;

          // Reajusta o multiplicador para ser proporcional ao BASE_REWARD de 150 id 13
          const stepMultiplier = [0, 75, 125, 250, 450]; // Aumento absoluto em Golds por passo id 14
          let stepsBonus = 0;
          for(let i = 1; i < totalSteps; i++){
              stepsBonus += stepMultiplier[i];
          }
          calculatedReward += stepsBonus;

          // TODO: Implementar consulta ao DB para 'geradorBonus' e aplicá-lo aqui
          // reward = calculatedReward * (1 + gerador.rewardMultiplier); id 15

          document.getElementById("basePriceDisplay").textContent = `${formatGold(subcategoryGolds)} Golds (Base)`;
          document.getElementById("calculatedReward").value = `${formatGold(calculatedReward)} Golds`;
          return calculatedReward;
      }
      // Se nenhuma subcategoria for selecionada, usa o valor base simplificado id 16
      const multipliers = [1, 1.5, 2.5, 4, 6];
      const multiplier = multipliers[totalSteps - 1] || multipliers[multipliers.length - 1]; // Limita em 5 passos id 17
      calculatedReward = baseReward * multiplier;
      document.getElementById("basePriceDisplay").textContent = `${formatGold(BASE_REWARD)} Golds (Base)`;
      document.getElementById("calculatedReward").value = `${formatGold(calculatedReward)} Golds (Base)`;
      return calculatedReward;
  }

  // Adiciona uma nova etapa (Passo do Serviço) (mantido) id 18
  function addStep() {
// ... (addStep mantido) ...
      if (serviceSteps.length >= 5) {
          showNotification("Máximo de 5 passos atingido.");
          return;
      }
      const newStepId = serviceSteps.length + 1;
      const container = document.getElementById("serviceStepsContainer");

      const newStep = { id: newStepId, description: "" };
      serviceSteps.push(newStep);
      renderServiceSteps();

      document.getElementById("stepCount").textContent = serviceSteps.length;
      if (serviceSteps.length >= 5) {
          document.getElementById("addStepButton").disabled = true;
          document.getElementById("addStepButton").textContent = "Máximo de 5 passos atingido";
      }
      calculateRewardPerFreelancer();
      prepareSummary();
      updateModalSize();
  }

  // Remove uma etapa (Passo do Serviço) (mantido) id 19
  function removeStep(id) {
// ... (removeStep mantido) ...
      if (serviceSteps.length === 1) {
          showNotification("O serviço deve ter pelo menos 1 passo.");
          return;
      }

      serviceSteps = serviceSteps.filter(step => step.id !== id);
      renderServiceSteps();
      document.getElementById("stepCount").textContent = serviceSteps.length;
      if (serviceSteps.length < 5) {
          document.getElementById("addStepButton").disabled = false;
          document.getElementById("addStepButton").textContent = `+ Adicionar Passo (Total: ${serviceSteps.length})`;
      }
      calculateRewardPerFreelancer();
      prepareSummary();
      updateModalSize();
  }

  // Atualiza a descrição de um passo no array serviceSteps (mantido) id 20
  function updateStepDescription(id, value) {
// ... (updateStepDescription mantido) ...
      const step = serviceSteps.find(s => s.id === id);
      if (step) {
          step.description = value;
      }
  }

  // Renderiza a lista de passos (mantido) id 21
  function renderServiceSteps() {
// ... (renderServiceSteps mantido) ...
      const container = document.getElementById("serviceStepsContainer");
      container.innerHTML = '';
      serviceSteps.forEach((step, index) => {
          const stepId = index + 1;
          const stepDiv = document.createElement('div');
          stepDiv.className = 'step-item';
          stepDiv.setAttribute('data-step-id', stepId);
          stepDiv.innerHTML = `
              <input type="text" placeholder="Passo ${stepId} (Obrigatório)" class="service-step-input" required value="${step.description || ''}" oninput="updateStepDescription(${stepId}, this.value)">
              <button class="bg-red-500 hover:bg-red-700 text-white" style="display: ${stepId === 1 ? 'none' : 'block'};" onclick="removeStep(${stepId})"><i class="fas fa-trash"></i></button>
          `;
          container.appendChild(stepDiv);
          step.id = stepId;
      });
      document.getElementById("stepCount").textContent = serviceSteps.length;
  }

  // Validação da etapa atual (mantido, mas com reforço de validação no server-side) id 22
  function validateStep(step) {
// ... (validateStep mantido) ...
      document.getElementById("errorMessage").style.display = "none";

      switch (step) {
          case 1:
              const subcategory = document.getElementById("subcategory").value;
              const freelancers = parseInt(document.getElementById("freelancers").value);
              const description = document.getElementById("serviceDescription").value.trim();
              if (!subcategory) {
                  document.getElementById("errorMessage").textContent = "Selecione a Categoria do Serviço.";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }
              if (!freelancers || freelancers <= 0 || isNaN(freelancers)) {
                  document.getElementById("errorMessage").textContent = "Informe uma quantidade válida de Freelancers (> 0).";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }
              // TODO: Adicionar validação de 'freelancers <= maxAllowed' id 23 
              if (description.length < 10) {
                  document.getElementById("errorMessage").textContent = "A Descrição Rápida deve ter pelo menos 10 caracteres.";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }
              return true;
          case 2:
              let allStepsValid = true;
              serviceSteps.forEach((step) => {
                  const inputElement = document.querySelector(`.step-item[data-step-id="${step.id}"] .service-step-input`);
                  if (!inputElement || inputElement.value.trim() === "") {
                      allStepsValid = false;
                  } else {
                      step.description = inputElement.value.trim();
                  }
              });

              if (!allStepsValid) {
                  document.getElementById("errorMessage").textContent = "Preencha a descrição de todos os passos do serviço.";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }

              calculateRewardPerFreelancer();
              return true;
          case 3:
              const proofDescription = document.getElementById("proofDescription").value.trim();
              const proofImage = document.getElementById("proofImage").checked;
              const proofText = document.getElementById("proofText").checked;
              const minProofCount = parseInt(document.getElementById("minProofCount").textContent);

              if (proofDescription.length < 10) {
                  document.getElementById("errorMessage").textContent = "A descrição da prova deve ter pelo menos 10 caracteres.";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }
              if (minProofCount === 2 && (!proofImage || !proofText)) {
                  document.getElementById("errorMessage").textContent = "Com a complexidade do serviço, você deve exigir pelo menos 2 tipos de prova (Imagem E Texto).";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }
              if (minProofCount === 1 && !proofImage && !proofText) {
                  document.getElementById("errorMessage").textContent = "Selecione pelo menos um tipo de prova (Imagem ou Texto).";
                  document.getElementById("errorMessage").style.display = "block";
                  return false;
              }

              prepareSummary();
              return true;
          case 4:
              return true;
          default:
              return true;
      }
  }

let isAnimating = false; // Bloqueia cliques durante animação
const completedSteps = new Set(); // Guarda etapas concluídas
const firstTimeSteps = new Set(); // Controla se o tutorial já apareceu
const stepTips = {
    1: "Preencha seus dados corretamente.",
    2: "Escolha o serviço desejado.",
    3: "Revise antes de enviar.",
    // adicione mais dicas conforme suas etapas
};

/**
 * Atualiza número da etapa com animação de contador
 */
function animateStepNumber(step) {
// ... (animateStepNumber mantido) ...
    const stepEl = document.getElementById("currentStepNumber");
    stepEl.style.transition = "all 0.3s ease";
    stepEl.style.opacity = "0";
    setTimeout(() => {
        stepEl.textContent = step;
        stepEl.style.opacity = "1";
    }, 150);
}

/**
 * Mostra dicas ou contexto da etapa
 */
function showStepTip(step) {
// ... (showStepTip mantido) ...
    const tipEl = document.getElementById("stepTip");
    if (!tipEl) return;
    tipEl.textContent = stepTips[step] || "";
    tipEl.classList.add("fade-in-tip");
    setTimeout(() => tipEl.classList.remove("fade-in-tip"), 1000);
}

/**
 * Mostra mini tutorial ou tooltip se for a primeira vez
 */
function showStepTutorial(step) {
// ... (showStepTutorial mantido) ...
    if (firstTimeSteps.has(step)) return; // já mostrado
    const tutorialEl = document.getElementById("stepTutorial");
    if (!tutorialEl) return;
    tutorialEl.textContent = "Dica rápida desta etapa!";
    tutorialEl.classList.add("slide-down-tip");
    setTimeout(() => tutorialEl.classList.remove("slide-down-tip"), 2000);
    firstTimeSteps.add(step);
}

/**
 * Atualiza marcação de etapas concluídas e barra de progresso
 */
function updateCompletedSteps() {
// ... (updateCompletedSteps mantido) ...
    const progressEls = document.querySelectorAll(".progress-step");
    progressEls.forEach((el, index) => {
        const stepNumber = index + 1;
        if (completedSteps.has(stepNumber)) {
            el.classList.add("completed");
        } else {
            el.classList.remove("completed");
        }

        // Atualiza largura da barra de progresso
        const progressBar = document.getElementById("progressBar");
        if (progressBar) {
            const progressPercent = (completedSteps.size / totalSteps) * 100;
            progressBar.style.width = progressPercent + "%";
        }
    });
}

/**
 * Aplica efeito de zoom/pop na etapa que entra
 */
function applyZoomEffect(element) {
// ... (applyZoomEffect mantido) ...
    element.style.transform = "scale(0.95)";
    setTimeout(() => {
        element.style.transition = "transform 0.3s ease";
        element.style.transform = "scale(1)";
    }, 50);
}

/**
 * Função genérica para navegar entre etapas com animação de deslize
 */
function goToStep(stepDelta) {
// ... (goToStep mantido) ...
    const newStep = currentStep + stepDelta;

    // Limites
    if (newStep < 1 || newStep > totalSteps) return;

    // Valida apenas se for avançar
    if (stepDelta > 0 && !validateStep(currentStep)) return;

    if (isAnimating) return; // Bloqueia cliques rápidos
    isAnimating = true;

    const currentElement = document.getElementById(`step-${currentStep}`);
    const targetElement = document.getElementById(`step-${newStep}`);

    // Define direção do deslize
    const direction = stepDelta > 0 ? 'left' : 'right';

    // Marca as etapas concluídas com base no avanço do usuário
function markCompletedSteps(stepDelta) {
// ... (markCompletedSteps mantido) ...
    // Só processa se houve avanço
    if (stepDelta > 0) {
        // Calcula todas as etapas que foram percorridas
        const startStep = Math.max(1, currentStep - stepDelta + 1);
        const endStep = Math.min(currentStep, totalSteps);
        
        for (let step = startStep; step <= endStep; step++) {
            // Adiciona apenas se ainda não estiver marcado
            if (!completedSteps.has(step)) {
                completedSteps.add(step);
            }
        }
    }
    
    // Atualiza a UI das etapas concluídas
    updateCompletedSteps();
}

    // Anima etapa atual saindo
    currentElement.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
    currentElement.style.transform = `translateX(${direction === 'left' ? '-100%' : '100%'})`;
    currentElement.style.opacity = '0';

    // Prepara a etapa alvo
    targetElement.style.transition = 'none';
    targetElement.style.transform = `translateX(${direction === 'left' ? '100%' : '-100%'})`;
    targetElement.style.opacity = '0';
    targetElement.classList.add('active');

    // Força repaint antes de animar
    void targetElement.offsetWidth;

    // Anima etapa alvo entrando
    targetElement.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
    targetElement.style.transform = 'translateX(0)';
    targetElement.style.opacity = '1';

    // Aplica zoom/pop
    applyZoomEffect(targetElement);

    // Atualiza número da etapa com animação
    currentStep = newStep;
    animateStepNumber(currentStep);

    // Mostra dicas e tutorial
    showStepTip(currentStep);
    showStepTutorial(currentStep);

    // Atualiza botões de navegação
    updateNavigationButtons();

    // Limpa estilos antigos após animação
    setTimeout(() => {
        currentElement.classList.remove('active');
        currentElement.style.transition = '';
        currentElement.style.transform = '';
        currentElement.style.opacity = '';

        targetElement.style.transition = '';
        targetElement.style.transform = '';
        targetElement.style.opacity = '';

        updateModalSize(); // Ajusta tamanho do modal
        isAnimating = false;

        // Feedback visual ao concluir a última etapa
        if (currentStep === totalSteps) {
            triggerCompletionEffect();
        }
    }, 350);
}

function nextStep() { goToStep(1); }
function prevStep() { goToStep(-1); }

/**
 * Pequeno efeito visual de comemoração ao finalizar a última etapa
 */
function triggerCompletionEffect() {
// ... (triggerCompletionEffect mantido) ...
    const modal = document.getElementById("modalContainer");
    if (!modal) return;
    modal.classList.add("completion-effect");
    setTimeout(() => modal.classList.remove("completion-effect"), 1000);
}

/**
 * Atualiza a visibilidade dos botões de navegação
 * - "Voltar" aparece se não estiver na primeira etapa
 * - "Próximo" aparece se não estiver na última etapa
 */
function updateNavigationButtons() {
// ... (updateNavigationButtons mantido) ...
    const backButton = document.getElementById("backButton");
    const nextButton = document.getElementById("nextButton");

    // Mostra ou esconde o botão "Voltar"
    backButton.style.display = currentStep > 1 ? 'block' : 'none';

    // Mostra ou esconde o botão "Próximo"
    const isLastStep = currentStep === totalSteps;
    nextButton.style.display = isLastStep ? 'none' : 'block';

    // Opcional: adicionar classes para animação ou estilos visuais
    backButton.classList.toggle('disabled', currentStep === 1);
    nextButton.classList.toggle('disabled', isLastStep);
}

/**
 * Atualiza dinamicamente o tamanho do modal conforme o conteúdo da etapa ativa
 * Com animação suave e efeito pop elegante
 * @param {function} callback - opcional, executa após animação
 */
function updateModalSize(callback) {
// ... (updateModalSize mantido) ...
    const modalContent = document.getElementById('modalContent');
    const activeStep = document.querySelector(`#step-${currentStep}`);
    const minHeight = 350;
    
    if (!activeStep || !modalContent) return;
    
    // Alturas de elementos fixos
    const titleHeight = document.getElementById('modalTitle')?.getBoundingClientRect().height || 0;
    const indicatorHeight = document.querySelector('.step-indicator')?.getBoundingClientRect().height || 0;
    const navigationHeight = document.querySelector('.step-navigation')?.getBoundingClientRect().height || 0;
    
    // Altura do conteúdo da etapa
    const contentHeight = activeStep.scrollHeight;
    
    // Padding do modal
    const style = window.getComputedStyle(modalContent);
    const paddingTop = parseFloat(style.paddingTop) || 0;
    const paddingBottom = parseFloat(style.paddingBottom) || 0;
    
    const totalHeight = contentHeight + titleHeight + indicatorHeight + navigationHeight + paddingTop + paddingBottom;
    const newHeight = Math.max(minHeight, totalHeight);
    
    // Transição suave de altura
    modalContent.style.transition = 'height 0.4s ease, transform 0.15s ease';
    modalContent.style.height = `${newHeight}px`;
    modalContent.style.width = '100%';
    
    // Efeito pop elegante
    modalContent.style.transform = 'scaleY(1.03)';
    setTimeout(() => {
        modalContent.style.transform = 'scaleY(1)';
    }, 180);
    
    // Callback opcional
    if (callback && typeof callback === 'function') {
        setTimeout(() => callback(newHeight), 400);
    }
}

  // Carrega subcategorias (mantido, com nota de DB Pricing) id 28
  function loadSubcategories() {
// ... (loadSubcategories mantido) ...
      if (!currentCompanyId || !subcategorias[currentCompanyId]) return;
      // TODO: Ajustar para ler 'pricing' do companies/{id}/pricing se necessário. id 29
      const subcategorySelect = document.getElementById("subcategory");
      subcategorySelect.innerHTML = '<option value="" disabled selected>Escolha uma subcategoria</option>';
      subcategorias[currentCompanyId].forEach(sub => {
          const option = document.createElement("option");
          option.value = sub.nome;
          option.textContent = sub.nome;
          option.dataset.goldsBase = sub.goldsBase;
          option.dataset.dificuldade = sub.dificuldade;
          subcategorySelect.appendChild(option);
      });

      // Reseta inputs id 30
      document.getElementById("serviceDifficulty").value = "Aguardando seleção...";
      document.getElementById("freelancers").value = "";
      document.getElementById("serviceDescription").value = "";
      serviceSteps = [{ id: 1, description: "" }];
      renderServiceSteps();
      document.getElementById("addStepButton").disabled = false;
      document.getElementById("addStepButton").textContent = `+ Adicionar Passo (Total: 1)`;
      calculateRewardPerFreelancer();

      // Zera as provas id 31
      document.getElementById("proofDescription").value = "";
      document.getElementById("proofImage").checked = true;
      document.getElementById("proofText").checked = false;
      document.getElementById("minProofCount").textContent = "1";

      updateModeInfoInStep2();
  }

  // NOVO: Atualiza a info da Etapa 2 (AJUSTADO: REMOVE TEXTO 'DOBRA') id 32
  function updateModeInfoInStep2() {
// ... (updateModeInfoInStep2 mantido) ...
    const infoBox = document.getElementById("modeDuplicationInfo");
    if (currentMode === 'empresarial') {
      infoBox.innerHTML = `
        <i class="fas fa-handshake" style="color: var(--secondary);"></i>
        <strong>Modo Empresarial:</strong> A taxa de serviço é de ${TAX_EMPRESARIAL * 100}% e será dividida (50% para a Empresa / 50% para o Banco Central).
      `;
    } else {
      infoBox.innerHTML = `
        <i class="fas fa-user" style="color: var(--text-secondary);"></i>
        <strong>Modo Pessoal:</strong> A taxa de serviço é de ${TAX_PERSONAL * 100}% e será destinada integralmente (100%) para o Banco Central.
      `;
    }
  }

  // Calcula dificuldade (mantido) id 33
  function calculateDifficultyAndProof() {
// ... (calculateDifficultyAndProof mantido) ...
      const subcategorySelect = document.getElementById("subcategory");
      const selectedOption = subcategorySelect.options[subcategorySelect.selectedIndex];
      if (selectedOption && selectedOption.dataset.dificuldade) {
          const dificuldade = selectedOption.dataset.dificuldade;
          document.getElementById("serviceDifficulty").value = dificuldade;

          let minProof = 1;
          if (dificuldade === "Complexo") {
              minProof = 2;
          }
          document.getElementById("minProofCount").textContent = minProof;
          calculateRewardPerFreelancer();
          prepareSummary();
      } else {
          document.getElementById("serviceDifficulty").value = "Aguardando seleção...";
          document.getElementById("minProofCount").textContent = "1";
          calculateRewardPerFreelancer();
          prepareSummary();
      }
  }

  // ====================================================================
  // 2. prepareSummary() - SOBRESCRITO: NOVA LÓGICA DE TAXA
  // ====================================================================
  async function prepareSummary() {
// ... (prepareSummary mantido) ...
    try {
        // 0️⃣ Pré-validação
        const freelancersInput = document.getElementById("freelancers").value;
        const difficulty = document.getElementById("serviceDifficulty").value;
        if (!freelancersInput || !difficulty) {
            showTopNotification("⚠️ Preencha todos os campos antes de continuar.");
            return;
        }
        
        // 1️⃣ Obtém valores
        const rewardPerFreelancer = calculateRewardPerFreelancer();
        const freelancers = parseInt(freelancersInput) || 0;
        
        // 2️⃣ Custo bruto
        const grossCost = roundGold(rewardPerFreelancer * freelancers);
        
        // 3️⃣ Taxas
        const feePercent = (currentMode === 'empresarial') ? TAX_EMPRESARIAL : TAX_PERSONAL;
        const totalFee = roundGold(grossCost * feePercent);
        
        let companyShare = 0;
        let bcShare = 0;
        if (currentMode === 'empresarial') {
            companyShare = roundGold(totalFee * COMPANY_SHARE_RATIO);
            bcShare = roundGold(totalFee - companyShare);
        } else {
            bcShare = totalFee;
        }
        
        // 4️⃣ Custo final
        const finalCost = roundGold(grossCost + totalFee);
        
        // 5️⃣ Atualiza UI dinamicamente
        const summaryDoubledCostRow = document.getElementById("summaryDoubledCostRow");
        const modeDuplicationSummaryEl = document.getElementById("modeDuplicationSummary");
        summaryDoubledCostRow.style.display = 'none';
        modeDuplicationSummaryEl.style.display = 'block';
        modeDuplicationSummaryEl.innerHTML = `
      <i class="fas fa-info-circle" style="color: var(--accent);"></i>
      <strong>Detalhe do Custo Bruto:</strong> ${formatGold(grossCost, true)} Golds pagos aos trabalhadores (Freelancers).
    `;
        
        const summaryFeeEl = document.getElementById("summaryFee");
        summaryFeeEl.innerHTML = `
      ${formatGold(totalFee, true)} Golds (${feePercent * 100}%)
      <span style="display: block; font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
          Empresa (${currentCompanyName}): ${formatGold(companyShare, true)} Golds<br>
          Banco Central (BC): ${formatGold(bcShare, true)} Golds
      </span>
    `;
        
        const currentBalance = walletData.goldsBalance || 0;
        
        // Atualiza o resumo com animação de contagem
        animateNumber(document.getElementById("summaryReward"), 0, rewardPerFreelancer);
        animateNumber(document.getElementById("summaryFreelancers"), 0, freelancers);
        animateNumber(document.getElementById("summaryGrossCost"), 0, grossCost);
        animateNumber(document.getElementById("summaryFinalCost"), 0, finalCost);
        
        document.getElementById("summaryUserName").textContent = walletData.name || "Usuário";
        document.getElementById("summaryUserId").textContent = walletData.id || "---";
        document.getElementById("summaryDifficulty").textContent = difficulty;
        
        // 6️⃣ Validação de saldo
        const confirmButton = document.getElementById("confirmPublishButton");
        const summaryWarning = document.getElementById("summaryWarning");
        if (currentBalance < finalCost) {
            summaryWarning.textContent = `Saldo insuficiente! Você precisa de ${formatGold(finalCost, true)} Golds. Saldo atual: ${formatGold(currentBalance, true)} Golds.`;
            summaryWarning.style.display = "block";
            confirmButton.disabled = true;
            confirmButton.style.backgroundColor = 'var(--text-secondary)';
            confirmButton.style.cursor = 'not-allowed';
        } else {
            summaryWarning.style.display = "none";
            confirmButton.disabled = false;
            confirmButton.style.backgroundColor = 'var(--secondary)';
            confirmButton.style.cursor = 'pointer';
        }
        
        // 7️⃣ Histórico de simulações
        const history = JSON.parse(localStorage.getItem('summaryHistory') || '[]');
        history.push({ date: new Date().toISOString(), finalCost, freelancers });
        localStorage.setItem('summaryHistory', JSON.stringify(history));
        
        // 8️⃣ Detecção de variações
        const lastSummary = JSON.parse(sessionStorage.getItem('lastSummary'));
        if (lastSummary && lastSummary.finalCost !== finalCost) {
            showTopNotification("💡 O custo mudou com base nas novas configurações.");
        }
        sessionStorage.setItem('lastSummary', JSON.stringify({ finalCost }));
        
        // 9️⃣ Retorna dados
        return { finalCost, totalFee, grossCost, rewardPerFreelancer, companyShare, bcShare };
        
    } catch (error) {
        console.error("Erro em prepareSummary:", error);
        showTopNotification("❌ Ocorreu um erro ao preparar o resumo.");
    }
}

// Função auxiliar de arredondamento
function roundGold(value) {
// ... (roundGold mantido) ...
    return Math.floor(value * 100) / 100;
}

// Função auxiliar para animar contagem de números
function animateNumber(element, start, end, duration = 500) {
// ... (animateNumber mantido) ...
    const startTime = performance.now();
    const step = (currentTime) => {
        const progress = Math.min((currentTime - startTime) / duration, 1);
        element.textContent = Math.floor(start + (end - start) * progress);
        if (progress < 1) requestAnimationFrame(step);
    };
    requestAnimationFrame(step);
}

  // Função para abrir o modal de publicação (mantido) id 47
  function openPublishModal(companyId, companyName, mode) {
// ... (openPublishModal mantido) ...
      selectedCompanyId = companyId;
    currentCompanyId = companyId;
    currentCompanyName = companyName;
    currentMode = mode;
    document.getElementById("modalCompanyName").textContent = companyName;

    currentStep = 1;
    document.getElementById("currentStepNumber").textContent = currentStep;
    document.getElementById("errorMessage").style.display = "none";

    for(let i = 1; i <= totalSteps; i++) {
      const stepElement = document.getElementById(`step-${i}`);
      stepElement.classList.remove('active', 'fade-in-step');
    }
    document.getElementById("step-1").classList.add('active', 'fade-in-step');

    loadSubcategories();
    updateNavigationButtons();

    const modal = document.getElementById("guidedPublishModal");
    modal.classList.add("active");
    setTimeout(updateModalSize, 50);
  }

// Função para fechar o modal (atualizado para exibir notificação pós-reload)
function closeModal() {
// ... (closeModal e DOMContentLoaded de notificação pós-reload mantidos) ...
    for (let i = 1; i <= totalSteps; i++) {
        const stepElement = document.getElementById(`step-${i}`);
        if (stepElement) {
            stepElement.classList.remove('active', 'fade-in-step');
        }
    }
    
    document.getElementById("guidedPublishModal").classList.remove("active");
    
    currentCompanyId = null;
    currentCompanyName = null;
    currentMode = 'empresarial';
    currentStep = 1;
    serviceSteps = [{ id: 1, description: "" }];
    
    // Salva estado temporário
    const tempState = {
        selectedCompanyId: null,
    };
    sessionStorage.setItem('tempModalState', JSON.stringify(tempState));
    
    // 💾 Marca no sessionStorage que a notificação deve aparecer após o reload
    sessionStorage.setItem('showServiceNotPublished', 'true');
    
    // Recarrega a página
    window.location.reload();
}

// Quando a página carregar novamente, verifica se deve mostrar a notificação
document.addEventListener('DOMContentLoaded', () => {
// ... (código mantido) ...
    const shouldShow = sessionStorage.getItem('showServiceNotPublished');
    if (shouldShow === 'true') {
        showTopNotification("⚠️ Serviço não publicado.");
        // Remove a flag para não aparecer novamente
        sessionStorage.removeItem('showServiceNotPublished');
    }
});

// Função para exibir a notificação superior executiva
function showTopNotification(message) {
// ... (showTopNotification mantido) ...
    let notification = document.getElementById("top-notification");
    
    // Cria a notificação se ainda não existir
    if (!notification) {
        notification = document.createElement("div");
        notification.id = "top-notification";
        document.body.appendChild(notification);
    }
    
    // Define o conteúdo e exibe
    notification.textContent = message;
    notification.classList.add("show");
    
    // Remove após alguns segundos
    setTimeout(() => {
        notification.classList.remove("show");
    }, 3000);
}

  // ====================================================================
  // 3. publishService() - ATUALIZADO: NOVA TRANSAÇÃO ATÔMICA COM BANK CENTRAL
  // ====================================================================
  
  async function publishService() {
      if (!validateStep(4)) return;
      const summaryData = await prepareSummary();
      if (!summaryData) return; // Se prepareSummary falhou ou retornou indefinido
      
      const { finalCost, totalFee, grossCost, rewardPerFreelancer, companyShare, bcShare } = summaryData;
      const user = auth.currentUser;

      if (!user) {
          showNotification("Usuário não autenticado!");
          return;
      }
      // Validação de saldo no cliente para UX (a validação crítica é na transação) id 49
      if (walletData.goldsBalance < finalCost) {
          showNotification("Saldo insuficiente para publicar o serviço.");
          return;
      }

      const subcategorySelect = document.getElementById("subcategory");
      const selectedOption = subcategorySelect.options[subcategorySelect.selectedIndex];
      const freelancers = parseInt(document.getElementById("freelancers").value);
      
      // Define a nova referência para o Serviço
      let serviceRef;
      if (currentMode === 'empresarial') {
          // companies/services_empresarial/<empresa>_services/<docId>
          serviceRef = refServiceEmpresarial(currentCompanyId).doc(); 
      } else {
          // companies/services_pessoal/usuarios/<docId>
          serviceRef = refServicePessoal(user.uid).doc(); 
      }
      
      const serviceData = {
          userId: user.uid,
          empresa: currentCompanyName,
          empresaId: currentCompanyId,
          modo: currentMode,
          nome: selectedOption.value,
          descricao: document.getElementById("serviceDescription").value.trim(),
          recompensa: rewardPerFreelancer,
          freelancers: freelancers,
          freelancersAtivos: 0,
          subcategoria: selectedOption.value,
          dificuldade: selectedOption.dataset.dificuldade,
          passos: serviceSteps,
          provaDescricao: document.getElementById("proofDescription").value.trim(),
          provaTipoImagem: document.getElementById("proofImage").checked,
          provaTipoTexto: document.getElementById("proofText").checked,
          status: "ativo",
          // Novos campos de contabilização id 50
          fee: totalFee,
          grossCost: grossCost,
          finalCost: finalCost,
          companyShare: companyShare,
          bcShare: bcShare,
          criadoEm: firebase.firestore.FieldValue.serverTimestamp()
      };

      try {
          await db.runTransaction(async (t) => {
              // 🎯 NOVAS REFERÊNCIAS
              const userWalletRef = refWalletUsuario(user.uid);
              const empresaWalletRef = refWalletEmpresa(currentCompanyId);
              const ativosRef = refAtivosEmpresa(currentCompanyId); 
              const bcReserveRef = refBCReserve();
              const bcCoinsRef = refBCCoins();
              const companyProfileRef = refCompanyProfile(currentCompanyId);
              
              // 1. Verificar Saldo (Carteira do Usuário)
              const walletDoc = await t.get(userWalletRef);
              if (!walletDoc.exists) throw new Error('Carteira do usuário não encontrada.');

              const currentGoldsBalance = walletDoc.data().goldsBalance || 0;
              if (currentGoldsBalance < finalCost) {
                  throw new Error('Saldo insuficiente para esta publicação.');
              }

              // 2. Débito do Usuário (Atomicamente)
              const transactionData = {
                  type: 'debit',
                  amount: finalCost,
                  currency: 'golds',
                  description: `Publicação de serviço (${currentMode}): ${selectedOption.value}`,
                  companyShare: companyShare, 
                  bcShare: bcShare,           
                  date: new Date().toISOString(),
                  serviceId: serviceRef.id
              };
              t.update(userWalletRef, {
                  goldsBalance: currentGoldsBalance - finalCost,
                  transactions: firebase.firestore.FieldValue.arrayUnion(transactionData)
              });

              // 3. Creditar Taxas na Empresa (Wallet e Ativos)
              if (companyShare > 0) {
                  // Credita na Wallet da Empresa
                  const empresaWalletDoc = await t.get(empresaWalletRef);
                  const currentEmpresaGolds = empresaWalletDoc.exists ? empresaWalletDoc.data().goldsBalance || 0 : 0;
                  t.set(empresaWalletRef, {
                      goldsBalance: currentEmpresaGolds + companyShare,
                      lastUpdate: firebase.firestore.FieldValue.serverTimestamp()
                  }, { merge: true });

                  // Credita nos Ativos da Empresa
                  const ativosDoc = await t.get(ativosRef);
                  const currentAtivosGolds = ativosDoc.exists ? ativosDoc.data().goldsBalance || 0 : 0;
                  t.set(ativosRef, {
                      goldsBalance: currentAtivosGolds + companyShare
                  }, { merge: true });

                  // Atualiza contadores de serviço no Perfil da Empresa
                  const companyProfileDoc = await t.get(companyProfileRef);
                  const publishedCount = companyProfileDoc.exists ? companyProfileDoc.data().published || 0 : 0;
                  const activeCount = companyProfileDoc.exists ? companyProfileDoc.data().active || 0 : 0;
                  
                  t.set(companyProfileRef, {
                      published: publishedCount + 1,
                      active: activeCount + 1,
                      ownerUserId: companyProfileDoc.exists ? companyProfileDoc.data().ownerUserId : user.uid, // Garante que o ownerId existe
                      lastUpdate: firebase.firestore.FieldValue.serverTimestamp()
                  }, { merge: true });
              }

              // 4. Creditar Taxas no Banco Central (Reserve)
              if (bcShare > 0) {
                  const bcDoc = await t.get(bcReserveRef);
                  const bcReserve = bcDoc.exists ? bcDoc.data().reserve || 0 : 0;
                  t.set(bcReserveRef, {
                      reserve: bcReserve + bcShare,
                      lastUpdate: firebase.firestore.FieldValue.serverTimestamp()
                  }, { merge: true });
              }
              
              // 5. Atualizar Moedas (Reflete o fluxo total de Golds)
              const moedasDoc = await t.get(bcCoinsRef);
              const currentGoldsTotal = moedasDoc.exists ? moedasDoc.data().goldsTotal || 0 : 0;
              // A publicação de serviço não altera o total de Golds em circulação (apenas redistribui), 
              // mas é uma boa prática atualizar o 'lastFlow' para auditoria.
              t.set(bcCoinsRef, {
                  goldsLastFlow: finalCost,
                  goldsTotal: currentGoldsTotal, // Permanece o mesmo (recirculação)
                  lastUpdate: firebase.firestore.FieldValue.serverTimestamp()
              }, { merge: true });
              
              // 6. Criação do Serviço
              t.set(serviceRef, serviceData);
          });

          showNotification("Serviço publicado com sucesso! Contabilização e taxas aplicadas (BC/Empresa).");
          closeModal();
          // carregarDadosCards(); // Chamado dentro de carregarDadosUsuario, o que é suficiente
          // carregarEstatisticasServicos(); // Chamado dentro de carregarDadosUsuario, o que é suficiente

      } catch (error) {
          console.error("❌ Erro na transação de publicação:", error.message || error);
          showNotification(`Erro ao publicar serviço: ${error.message || 'Falha na transação.'}`);
      }
  }

  // Funções restantes (mantidas) ...

  // Função para carregar estatísticas dos serviços publicados (AJUSTADO: NOVOS CAMINHOS) id 63
  async function carregarEstatisticasServicos() {
      const user = auth.currentUser;
      if (!user) return;
      const cardIds = [
          "facebook", "instagram", "mobile", "telegram",
          "tiktok", "video", "discord", "blog", "reddit", "seo", "inscricoes"
      ];
      
      for (const cardId of cardIds) {
          // 🎯 ATUALIZAÇÃO: Carrega serviços empresariais do novo caminho
          const empresarialSnapshot = await refServiceEmpresarial(cardId)
              .where("userId", "==", user.uid)
              .where("modo", "==", "empresarial")
              .get();
              
          let empresarialPublished = 0;
          let empresarialActive = 0;
          let empresarialPending = 0;
          empresarialSnapshot.forEach(doc => {
              const data = doc.data();
              empresarialPublished++;
              if (data.status === "ativo") empresarialActive++;
              if (data.status === "pendente") empresarialPending++;
          });
          // Atualiza UI empresarial id 65
          const publishedEl = document.getElementById(`${cardId}-published`);
          const activeEl = document.getElementById(`${cardId}-active`);
          const pendingEl = document.getElementById(`${cardId}-pending`);
          if (publishedEl) publishedEl.textContent = empresarialPublished;
          if (activeEl) activeEl.textContent = empresarialActive;
          if (pendingEl) pendingEl.textContent = empresarialPending;
          
          // 🎯 ATUALIZAÇÃO: Carrega serviços pessoais do novo caminho
          const pessoalSnapshot = await refServicePessoal(user.uid)
              .where("empresaId", "==", cardId) // services_pessoal/usuarios já filtra pelo user na ref
              .where("modo", "==", "pessoal")
              .get();
              
          let pessoalPublished = 0;
          let pessoalActive = 0;
          let pessoalPending = 0;
          pessoalSnapshot.forEach(doc => {
              const data = doc.data();
              pessoalPublished++;
              if (data.status === "ativo") pessoalActive++;
              if (data.status === "pendente") pessoalPending++;
          });
          // Atualiza UI pessoal id 67
          const publishedElPessoal = document.getElementById(`${cardId}-published-pessoal`);
          const activeElPessoal = document.getElementById(`${cardId}-active-pessoal`);
          const pendingElPessoal = document.getElementById(`${cardId}-pending-pessoal`);
          if (publishedElPessoal) publishedElPessoal.textContent = pessoalPublished;
          if (activeElPessoal) activeElPessoal.textContent = pessoalActive;
          if (pendingElPessoal) pendingElPessoal.textContent = pessoalPending;
      }
  }
  

  // Função para carregar dados do usuário (AJUSTADO: NOVO CAMINHO) id 68
  function carregarDadosUsuario(user) {
      const userId = user.uid;
      // 🎯 ATUALIZAÇÃO: Nova referência para a carteira do usuário
      refWalletUsuario(userId).get()
          .then(doc => {
              if (doc.exists) {
                  const data = doc.data();
                  walletData = { ...data, id: userId };
                  document.getElementById("footerUserName").textContent = data.name || "Usuário";
                  document.getElementById("footerUserId").textContent = userId;
              } else {
                  document.getElementById("footerUserName").textContent = "Usuário";
                  document.getElementById("footerUserId").textContent = userId;
              }
              carregarDadosCards();
              carregarEstatisticasServicos();
          })
          .catch(error => {
              console.error("❌ Erro ao carregar dados:", error);
              document.getElementById("footerUserName").textContent = "Usuário";
              document.getElementById("footerUserId").textContent = userId;
              carregarDadosCards();
              carregarEstatisticasServicos();
          });
  }

  // Função para visualizar serviços publicados (Modo Empresarial) (mantido) id 69
  function viewServices(companyId) {
// ... (viewServices mantido) ...
    const user = auth.currentUser;
    if (!user) {
      showNotification("Usuário não autenticado!");
      return;
    }
    window.location.href = `servicos.html?empresa=${encodeURIComponent(companyId)}&modo=empresarial`;
  }

  // NOVO: Função para visualizar serviços publicados (Modo Pessoal) (AJUSTADO: NOVO CAMINHO) id 70
  async function viewUserServices(companyId) {
      const user = auth.currentUser;
      if (!user) {
          showNotification("Usuário não autenticado!");
          return;
      }

      try {
          // 🎯 ATUALIZAÇÃO: Nova referência para serviços pessoais
          const servicesSnapshot = await refServicePessoal(user.uid)
              .where("empresaId", "==", companyId)
              .where("modo", "==", "pessoal")
              .get();
              
          let html = `
        <h2><i class="fas fa-eye"></i> Seus Serviços Publicados (${companyId})</h2>
        <p style="margin-bottom: 1rem;">Aqui estão todos os serviços pessoais que você publicou.</p>
      `;

          if (servicesSnapshot.empty) {
              html += `
          <p>Nenhum serviço publicado ainda.</p>
          <p style="font-size: 0.85rem; color: var(--text-secondary);">
            Publique um novo serviço no Modo Pessoal para vê-lo aqui.
          </p>
        `;
          } else {
              servicesSnapshot.forEach(doc => {
                  const data = doc.data();
                  html += `
            <div class="service-card" style="
              background: var(--surface);
              padding: 12px;
              border-radius: 10px;
              margin-bottom: 10px;
              box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            ">
              <h4 style="margin-bottom: 4px;">${escapeHtml(data.nome || '')}</h4>
              <p style="font-size: 0.9rem; margin-bottom: 6px;">${escapeHtml(data.descricao || '')}</p>
              <span style="font-size: 0.8rem; color: var(--text-secondary);">Status: ${escapeHtml(data.status || '—')}</span>
              <div style="margin-top: 10px;">
                <button style="background: var(--secondary); color: white; border: none; padding: 6px 10px; border-radius: 6px; cursor: pointer; margin-right: 5px;"
                  onclick="editService('${doc.id}')">
                  <i class="fas fa-edit"></i> Editar
                </button>
                <button style="background: var(--accent); color: white; border: none; padding: 6px 10px; border-radius: 6px; cursor: pointer;"
                  onclick="deleteService('${doc.id}')">
                  <i class="fas fa-trash"></i> Excluir
                </button>
              </div>
            </div>
          `;
              });
          }

          showSimpleModal("Serviços Publicados", html);

      } catch (error) {
          console.error("Erro ao carregar serviços pessoais:", error);
          showNotification("Erro ao carregar serviços publicados.");
      }
  }

  // Função auxiliar simples para evitar injeção de HTML no modal (mantido) id 71
  function escapeHtml(str) {
// ... (escapeHtml mantido) ...
      return String(str)
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;')
          .replace(/'/g, '&#39;');
  }

  // STUBs (mantido) id 72
  function editService(serviceId) {
// ... (editService mantido) ...
      showNotification("Abrir edição para serviço: " + serviceId);
  }

  // Exclui o serviço do Firestore (AJUSTADO: NOVO CAMINHO) id 73
  async function deleteService(serviceId) {
      if (!confirm("Deseja realmente excluir este serviço?")) return;
      try {
          const user = auth.currentUser;
          if (!user) throw new Error('Usuário não autenticado.');
          
          // O serviço pessoal está em companies/services_pessoal/usuarios/<docId>
          const serviceRef = refServicePessoal(user.uid).doc(serviceId); 

          await serviceRef.delete();
          showNotification("Serviço excluído com sucesso.");
          // Recarrega a visualização após a exclusão
          carregarEstatisticasServicos(); 
      } catch (err) {
          console.error("Erro ao excluir serviço:", err);
          showNotification("Erro ao excluir serviço.");
      }
  }

  function simulateAction(action, companyId) {
// ... (simulateAction mantido) ...
      showNotification(`Ação simulada: ${action} para ${companyId} (Modo Pessoal)`);
  }

  // Função utilitária para mostrar um modal simples (mantido) id 74
  function showSimpleModal(title, content) {
// ... (showSimpleModal mantido) ...
      const modal = document.getElementById("guidedPublishModal");
      const modalContent = document.getElementById("modalContent");

      for(let i = 1; i <= totalSteps; i++) {
        const stepElement = document.getElementById(`step-${i}`);
        if(stepElement) {
            stepElement.classList.remove('active', 'fade-in-step');
        }
      }
      document.querySelector('.step-navigation').style.display = 'none';
      document.querySelector('.step-indicator').style.display = 'none';

      document.getElementById("modalTitle").textContent = title;
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = content;
      modalContent.prepend(tempDiv);

      modalContent.style.height = 'auto';
      modal.classList.add("active");

      const closeBtn = modalContent.querySelector('.close');
      closeBtn.onclick = () => {
          modal.classList.remove("active");
          tempDiv.remove();
          document.querySelector('.step-navigation').style.display = 'flex';
          document.querySelector('.step-indicator').style.display = 'block';
      };

      document.getElementById("modalTitle").textContent = title;
      modal.classList.add("active");
      setTimeout(() => modalContent.style.height = '350px', 50);
  }

// Função para exibir notificções (corrigida e segura) id 75
function showNotification(message) {
// ... (showNotification mantido) ...
    const notification = document.getElementById('notification');
    
    // Se o elemento não existir, apenas mostra no console e sai
    if (!notification) {
        console.warn('Elemento #notification não encontrado. Mensagem:', message);
        return;
    }
    
    // Atualiza o texto da notificação
    notification.textContent = message;
    
    // Exibe e depois oculta
    notification.classList.add('show');
    setTimeout(() => {
        notification.classList.remove('show');
    }, 3000);
}

  // Funções para os botões dos cards (mantido) id 76
  function contratar(cardId) {
// ... (contratar mantido) ...
    const card = document.querySelector(`[data-card-id="${cardId}"]`);
    const title = card.querySelector('h3')?.textContent || 'card';
    openPublishModal(cardId, title, 'empresarial');
  }

  function executarMissoes(cardId) {
// ... (executarMissoes mantido) ...
    const card = document.querySelector(`[data-card-id="${cardId}"]`);
    const title = card.querySelector('h3')?.textContent || 'card';
    showNotification(`Executando missões em ${title}... (simulado)`);
  }

  // Função para determinar o nível global com base nos Golds (mantido) id 77
  function determinarNivelGlobal(cardId, golds) {
// ... (determinarNivelGlobal mantido) ...
    const niveis = niveisGlobais[cardId] || [];
    let nivelAtual = niveis[0];
    let proximaMeta = niveis[0].golds;
    for (let i = niveis.length - 1; i >= 0; i--) {
      if (golds >= niveis[i].golds) {
        nivelAtual = niveis[i];
        proximaMeta = i < niveis.length - 1 ? niveis[i + 1].golds : niveis[i].golds;
        break;
      }
    }
    return { nivelAtual, proximaMeta };
  }

  // Função para atualizar progresso e nível de um card específico (mantido) id 78
  function atualizarProgressoDoCard(cardId, golds, metricValue) {
// ... (atualizarProgressoDoCard mantido) ...
    // Empresarial id 79
    const { nivelAtual, proximaMeta } = determinarNivelGlobal(cardId, golds);
    const percentual = Math.min((Number(golds) / proximaMeta) * 100, 100);
    const fillEl = document.getElementById(`${cardId}-progress`);
    const textEl = document.getElementById(`${cardId}-progress-text`);
    const nivelEl = document.getElementById(`${cardId}-nivel`);
    const goldsEl = document.getElementById(`${cardId}-golds`);
    const metricEl = document.getElementById(`${cardId}-${cardId === 'facebook' || cardId === 'instagram' ? 'seguidores' :
                                                    cardId === 'mobile' ? 'instalacoes' :
                                                    cardId === 'telegram' ? 'canais' :
                                                    cardId === 'tiktok' ? 'curtidas' :
                                                    cardId === 'video' ? 'campanhas' :
                                                    cardId === 'discord' ? 'servidores' :
                                                    cardId === 'blog' ? 'comentarios' :
                                                    cardId === 'reddit' ? 'upvotes' :
                                                    cardId === 'seo' ? 'palavras' : 'ativas'}`);
    if (fillEl) fillEl.style.width = `${percentual}%`;
    if (textEl) textEl.textContent = `${formatGold(golds)} / ${formatGold(proximaMeta)}`;
    if (nivelEl) nivelEl.textContent = nivelAtual.nome;
    if (goldsEl) goldsEl.textContent = formatGold(golds);
    if (metricEl && metricValue !== undefined) metricEl.textContent = formatGold(metricValue, false);

    // Pessoal id 80
    const fillElPessoal = document.getElementById(`${cardId}-progress-pessoal`);
    const textElPessoal = document.getElementById(`${cardId}-progress-text-pessoal`);
    const nivelElPessoal = document.getElementById(`${cardId}-nivel-pessoal`);
    const goldsElPessoal = document.getElementById(`${cardId}-golds-pessoal`);
    const metricElPessoal = document.getElementById(`${cardId}-${cardId === 'facebook' || cardId === 'instagram' ? 'seguidores' :
                                                    cardId === 'mobile' ? 'instalacoes' :
                                                    cardId === 'telegram' ? 'canais' :
                                                    cardId === 'tiktok' ? 'curtidas' :
                                                    cardId === 'video' ? 'campanhas' :
                                                    cardId === 'discord' ? 'servidores' :
                                                    cardId === 'blog' ? 'comentarios' :
                                                    cardId === 'reddit' ? 'upvotes' :
                                                    cardId === 'seo' ? 'palavras' : 'ativas'}-pessoal`);

    if (fillElPessoal) fillElPessoal.style.width = `${percentual}%`;
    if (textElPessoal) textElPessoal.textContent = `${formatGold(golds)} / ${formatGold(proximaMeta)}`;
    if (nivelElPessoal) nivelElPessoal.textContent = nivelAtual.nome;
    if (goldsElPessoal) goldsElPessoal.textContent = formatGold(golds);
    if (metricElPessoal && metricValue !== undefined) metricElPessoal.textContent = formatGold(metricValue, false);
  }

  // Função para carregar dados dos cards (AJUSTADO: LER 'bankCentral/wallets_empresas') id 81
  function carregarDadosCards() {
    const cardIds = [
      "facebook", "instagram", "mobile", "telegram",
      "tiktok", "video", "discord", "blog", "reddit", "seo", "inscricoes"
    ];
    cardIds.forEach(cardId => {
      // 🎯 ATUALIZAÇÃO: Lendo da nova coleção de Wallet da Empresa
      refWalletEmpresa(cardId).onSnapshot((doc) => {
        if (doc.exists) {
          const data = doc.data();
          // NOVO CAMPO: goldsBalance (substituindo goldsEmpresa) id 83
          const golds = data.goldsBalance || 0; 
          
          // Tenta ler métrica do Perfil da Empresa (ex: seguidores/instalacoes)
          refCompanyProfile(cardId).get().then(profileSnap => {
              let metricValue = 0;
              if (profileSnap.exists) {
                  const profileData = profileSnap.data();
                  const metricKey = cardId === 'facebook' || cardId === 'instagram' ? 'seguidores' :
                                 cardId === 'mobile' ? 'instalacoes' :
                                 cardId === 'telegram' ? 'canais' :
                                 cardId === 'tiktok' ? 'curtidas' :
                                 cardId === 'video' ? 'campanhas' :
                                 cardId === 'discord' ? 'servidores' :
                                 cardId === 'blog' ? 'comentarios' :
                                 cardId === 'reddit' ? 'upvotes' :
                                 cardId === 'seo' ? 'palavras' : 'ativas';
                  metricValue = profileData[metricKey] || 0;
              }
              atualizarProgressoDoCard(cardId, golds, metricValue);
          }).catch(err => {
              console.error("Erro ao ler profile da empresa:", err);
              atualizarProgressoDoCard(cardId, golds, 0);
          });
          
        } else {
          // Se não existir na nova estrutura, zera (ou manteria a leitura legada para migração)
          atualizarProgressoDoCard(cardId, 0, 0);
        }
      }, (err) => {
        console.error("Erro onSnapshot:", err);
      });
    });
  }

  // Controle do carrossel com toque (mantido) id 86
  let currentCardEmpresarial = 0;
  const carouselEmpresarial = document.getElementById('company-carousel-empresarial');
  const cardsEmpresarial = carouselEmpresarial.querySelectorAll('.nav-card');
  const totalCardsEmpresarial = cardsEmpresarial.length;
  let currentCardPessoal = 0;
  const carouselPessoal = document.getElementById('company-carousel-pessoal');
  const cardsPessoal = carouselPessoal.querySelectorAll('.nav-card');
  const totalCardsPessoal = cardsPessoal.length;
  let touchStartX = 0;
  let touchEndX = 0;

  function updateCarousel() {
// ... (updateCarousel mantido) ...
    const firstCardEmpresarial = carouselEmpresarial.querySelector('.nav-card');
    if (firstCardEmpresarial) {
        const widthEmpresarial = firstCardEmpresarial.offsetWidth + 12;
        carouselEmpresarial.style.transform = `translateX(-${currentCardEmpresarial * widthEmpresarial}px)`;
    }
    const firstCardPessoal = carouselPessoal.querySelector('.nav-card');
    if (firstCardPessoal) {
        const widthPessoal = firstCardPessoal.offsetWidth + 12;
        carouselPessoal.style.transform = `translateX(-${currentCardPessoal * widthPessoal}px)`;
    }
  }

  // Event listeners para o carrossel (mantido) id 87
  carouselEmpresarial.addEventListener('touchstart', (e) => {
// ... (event listeners do carrossel mantidos) ...
    touchStartX = e.changedTouches[0].screenX;
  });

  carouselEmpresarial.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    const swipeDistance = touchEndX - touchStartX;
    if (swipeDistance > 50 && currentCardEmpresarial > 0) {
      currentCardEmpresarial--;
    } else if (swipeDistance < -50 && currentCardEmpresarial < totalCardsEmpresarial - 1) {
      currentCardEmpresarial++;
    }
    updateCarousel();
  });

  carouselPessoal.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
  });

  carouselPessoal.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    const swipeDistance = touchEndX - touchStartX;
    if (swipeDistance > 50 && currentCardPessoal > 0) {
      currentCardPessoal--;
    } else if (swipeDistance < -50 && currentCardPessoal < totalCardsPessoal - 1) {
      currentCardPessoal++;
    }
    updateCarousel();
  });

  // Carrega dados do usuário e verifica autenticação (mantido) id 88
  document.addEventListener('DOMContentLoaded', () => {
// ... (DOMContentLoaded e listeners mantidos) ...
    auth.onAuthStateChanged(user => {
      if (user) {
        carregarDadosUsuario(user);
      } else {
        document.getElementById("footerUserName").textContent = "Nenhum usuário ativo";
        document.getElementById("footerUserId").textContent = "---";
        window.location.href = "cadastro.html";
      }
    });

    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;
    themeToggle.addEventListener('click', () => {
      const currentTheme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      body.setAttribute('data-theme', currentTheme);
      localStorage.setItem('theme', currentTheme);
    });

    const savedTheme = localStorage.getItem('theme') || 'light';
    body.setAttribute('data-theme', savedTheme);

    const menuToggles = {
      'menu-icon': 'main-menu'
    };

    Object.entries(menuToggles).forEach(([toggleId, menuId]) => {
      const toggle = document.getElementById(toggleId);
      const menu = document.getElementById(menuId);
      if (!toggle || !menu) {
        console.error(`Elemento ${toggleId} ou ${menuId} não encontrado`);
        return;
      }
      toggle.addEventListener('click', e => {
        e.stopPropagation();
        menu.classList.toggle('open');
        toggle.classList.toggle('active');
      });
    });

    document.addEventListener('click', e => {
      if (!e.target.closest('.menu') && !e.target.closest('.top-bar__icon')) {
        Object.values(menuToggles).forEach(menuId => {
          const menu = document.getElementById(menuId);
          if (menu) menu.classList.remove('open');
        });
        document.querySelectorAll('.top-bar__icon').forEach(icon => {
          if (icon) icon.classList.remove('active');
        });
      }
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        Object.values(menuToggles).forEach(menuId => {
          const menu = document.getElementById(menuId);
          if (menu) menu.classList.remove('open');
        });
        document.querySelectorAll('.top-bar__icon').forEach(icon => {
          if (icon) icon.classList.remove('active');
        });
        closeModal();
      }
    });

    document.getElementById("logout-button").addEventListener("click", () => {
      auth.signOut().then(() => window.location.href = "cadastro.html");
    });

    const cookieBanner = document.getElementById('cookieBanner');
    const cookieAccept = document.getElementById('cookie-accept');
    const cookieDecline = document.getElementById('cookie-decline');

    function showCookieBannerOncePerDay() {
      const today = new Date().toISOString().split('T')[0];
      const lastShown = localStorage.getItem('cookieBannerLastShown');
      if (lastShown !== today) {
        cookieBanner.classList.add('active');
        localStorage.setItem('cookieBannerLastShown', today);
      }
    }

    showCookieBannerOncePerDay();

    cookieAccept.addEventListener('click', () => {
      cookieBanner.classList.remove('active');
    });

    cookieDecline.addEventListener('click', () => {
      cookieBanner.classList.remove('active');
    });

    window.addEventListener('resize', updateCarousel);

    setTimeout(updateCarousel, 100);

    // Adiciona event listeners para os inputs da Etapa 1 e 2 id 89
    document.getElementById("subcategory").addEventListener("change", calculateDifficultyAndProof);
    document.getElementById("freelancers").addEventListener("input", prepareSummary);
    document.getElementById("serviceStepsContainer").addEventListener("input", prepareSummary);
  });
  function navigateTo(page) {
// ... (navigateTo mantido) ...
    let url;
    switch (page) {
        case 'home':
            url = 'index.html';
            break;
        case 'yshippcommerce':
            url = 'yshippcommerce.html';
            break;
        case 'market':
            url = 'https://linkpremiado51-cmd.github.io/yshippcommerce/mercado.html';
            break;
        case 'store':
            url = 'store.html';
            break;
        case 'generator':
            url = 'https://linkpremiado51-cmd.github.io/yshippcommerce/gerador.html';
            break;
        case 'wallet':
            url = 'https://linkpremiado51-cmd.github.io/yshippcommerce/carteira.html';
            break;
        default:
            url = 'index.html';
            break;
    }
    window.location.href = url;
  }
// 🌐 Função pública (AJUSTADO: NOVO CAMINHO) id 90
async function viewPublicServices() {
    try {
        // 🎯 ATUALIZAÇÃO: Busca em todos os serviços ativos (exige regras de segurança ou um campo de índice)
        // Por simplificação, vamos buscar em todos os serviços empresariais ativos:
        
        const cardIds = [
            "facebook", "instagram", "mobile", "telegram",
            "tiktok", "video", "discord", "blog", "reddit", "seo", "inscricoes"
        ];
        
        let allServices = [];
        for (const cardId of cardIds) {
            const snapshot = await refServiceEmpresarial(cardId)
                .where("status", "==", "ativo")
                .get();
            snapshot.forEach(doc => allServices.push({ id: doc.id, data: doc.data() }));
        }

        let html = `
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h2><i class="fas fa-store"></i> Mercado de Serviços</h2>
        <button class="btn ghost" onclick="closeModal()">Fechar</button>
      </div>
      <p style="margin-bottom:1rem;color:var(--text-secondary);">
        Aqui estão todos os serviços publicados no sistema que você pode executar e ganhar Golds.
      </p>
    `;
        
        if (allServices.length === 0) {
            html += `<p>Nenhum serviço disponível no momento. Volte mais tarde.</p>`;
        } else {
            allServices.forEach(item => {
                const data = item.data;
                html += `
          <div class="service-card" style="
            background: var(--surface);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
          ">
            <h3>${data.nome || "(Sem título)"}</h3>
            <p style="font-size:0.9rem;">${data.descricao || "Sem descrição disponível."}</p>
            <div style="font-size:0.85rem;margin-top:6px;">
              <span>Empresa: ${data.empresa || "Independente"}</span><br>
              <span>Recompensa: ${data.recompensa || 0} Golds</span>
            </div>
            <div style="margin-top:10px;">
              <button style="background: var(--primary); color: white; border: none; padding: 6px 10px; border-radius: 6px; cursor: pointer;"
                onclick="applyForService('${item.id}', '${data.nome || ""}')">
                <i class="fas fa-hand-pointer"></i> Executar Missão
              </button>
            </div>
          </div>
        `;
            });
        }
        
        showSimpleModal("Mercado de Serviços", html);
    } catch (error) {
        console.error("Erro ao carregar serviços públicos:", error);
        showNotification("Erro ao carregar o mercado de serviços.");
    }
}

// ✋ Função simulada para aplicar em um serviço (mantida) id 91
async function applyForService(serviceId, serviceName) {
// ... (applyForService mantido) ...
    const user = auth.currentUser;
    if (!user) return showNotification("Você precisa estar autenticado para executar serviços.");
    
    showNotification(`Você iniciou a missão: ${serviceName}. (Integração com execução real será implementada depois.)`);
}
firebase.initializeApp(firebaseConfig);
console.log("✅ Firebase inicializado com sucesso.");
// Restaura o estado temporário da memória do navegador após reload
const tempState = sessionStorage.getItem('tempModalState');
if (tempState) {
    const state = JSON.parse(tempState);
    selectedCompanyId = state.selectedCompanyId; // Restaura o estado (ex: null para atualizar o botão)
    // Restaure outros campos aqui, ex: currentMode = state.currentMode;
    
    // Atualize a UI do botão ou página com base no estado restaurado
    // Exemplo: updateButtonState(); // Função que você deve implementar para refletir o estado no botão
    
    sessionStorage.removeItem('tempModalState'); // Limpa a memória após uso
}
</script>

<script src="scripts/passos.js"></script>


