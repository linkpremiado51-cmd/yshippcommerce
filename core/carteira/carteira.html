<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Carteira - YshippCommerce">
    <title>Carteira  YshippCommerce</title>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+DW+Pica+SC&family=Libertinus+Serif+Display&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body data-theme="light">
    <div id="loadingOverlay">Carregando carteira...</div>
    <div class="header-menu">
        <nav aria-label="Navega√ß√£o principal" class="header" role="navigation">
            <div class="top-bar__section">
                <h1><i class="fas fa-wallet"></i>Carteira - YshippCommerce</h1>
            </div>
            <div class="top-bar__section">
                <button aria-label="Alternar menu" class="top-bar__icon" id="menu-icon">
                    <i class="fas fa-bars"></i>
                </button>
                <button aria-label="Alternar tema claro/escuro" class="top-bar__icon" id="theme-toggle" title="Alternar tema">
                    <i class="fas fa-adjust"></i>
                </button>
            </div>
        </nav>
        <nav aria-label="Menu principal" class="menu" id="main-menu">
            <ul class="menu__list">
                <li class="menu__item">
                    <button class="menu__link" onclick="navigateTo('home')">
                        <i class="fas fa-home"></i> <span>P√°gina Principal</span>
                    </button>
                </li>
                <li class="menu__item">
                    <button class="menu__link" onclick="navigateTo('yshippcommerce')">
                        <i class="fas fa-store"></i> <span>YshippCommerce</span>
                    </button>
                </li>
                <li class="menu__item">
                    <button class="menu__link" onclick="navigateTo('market')">
                        <i class="fas fa-briefcase"></i> <span>Mercado de Servi√ßos</span>
                    </button>
                </li>
                <li class="menu__item">
                    <button class="menu__link" onclick="navigateTo('store')">
                        <i class="fas fa-shopping-cart"></i> <span>Loja</span>
                    </button>
                </li>
                <li class="menu__item">
                    <button class="menu__link" onclick="navigateTo('generator')">
                        <i class="fas fa-ticket-alt"></i> <span>Gerador de Bilhetes</span>
                    </button>
                </li>
                <li class="menu__item">
                    <button class="menu__link" onclick="navigateTo('wallet')">
                        <i class="fas fa-wallet"></i> <span>Carteira</span>
                    </button>
                </li>
                <li class="menu__item">
                    <button class="menu__link" id="logout-button">
                        <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
                    </button>
                </li>
            </ul>
        </nav>
    </div>
    <div class="notification" id="notification"></div>
    <div id="overlay" class="overlay"></div>
    <main style="width:100%; max-width:1000px; padding:0 0.75rem 120px; margin:0 auto;">
        <div class="balance-carousel" id="balanceCarousel">
            <div class="balance-card gold">
                <div class="balance-label">Saldo em Golds</div>
                <div id="golds-balance" class="balance-amount">0 <span>ü™ô</span></div>
                <div class="balance-desc">Moeda virtual do sistema</div>
                <div class="level-badge" onclick="showLevelModal('golds')" title="Clique para ver detalhes do n√≠vel">
                    <i class="fas fa-trophy"></i> <span id="golds-level">N√≠vel 1</span>
                </div>
            </div>
            <div class="balance-card reais">
                <div class="balance-label">Saldo em Reais</div>
                <div id="reais-balance" class="balance-amount">R$ 0,00</div>
                <div class="balance-desc">Saldo dispon√≠vel para saque</div>
            </div>
            <div class="balance-card portfolio">
                <div class="balance-label">Saldo Dispon√≠vel em Portf√≥lio</div>
                <div id="portfolio-balance" class="balance-amount">0 <span>ü™ô</span></div>
                <div class="balance-desc">Lucro acumulado dos investimentos</div>
                <button class="action-btn resgate" onclick="openProfitWithdrawalModal()" title="Resgatar lucro acumulado">
                    <i class="fas fa-coins"></i> Resgatar Lucro
                </button>
            </div>
            <div class="balance-card enterprise">
                <div class="balance-label">Saldo Empresarial</div>
                <div id="enterprise-balance" class="balance-amount">0 <span>üè¢</span></div>
                <div class="balance-desc">Golds acumulados em perfil empresarial</div>
                <div class="level-badge" onclick="showLevelModal('enterprise')" title="Clique para ver detalhes do n√≠vel">
                    <i class="fas fa-trophy"></i> <span id="enterprise-level">N√≠vel 1</span>
                </div>
                <button class="action-btn enterprise" onclick="navigateTo('enterprise')" title="Ver carteira empresarial completa">
                    <i class="fas fa-building"></i> Ver Carteira Completa
                </button>
            </div>
            <div class="balance-card crypto">
                <div class="balance-label">Valor da Sua Criptomoeda</div>
                <div id="crypto-balance" class="balance-amount">0 YSC</div>
                <div class="balance-desc">Saldo em YshippCoin</div>
                <button class="action-btn crypto" id="analyzeCryptoBtn" onclick="analyzeCrypto()" disabled title="Analisar sua criptomoeda">
                    <i class="fas fa-chart-line"></i> Analisar Minha Cripto
                </button>
            </div>
        </div>
        <section class="wallet-section actions">
            <h2><i class="fas fa-bolt"></i>A√ß√µes R√°pidas</h2>
            <div class="action-buttons">
                <button class="action-btn default" onclick="openDepositModal()" title="Depositar reais na carteira">
                    <i class="fas fa-arrow-down"></i>Depositar
                </button>
                <button class="action-btn withdraw" onclick="openWithdrawModal()" title="Sacar reais ou golds">
                    <i class="fas fa-arrow-up"></i>Sacar
                </button>
                <button class="action-btn transfer" onclick="openTransferModal()" title="Transferir golds ou reais para outro usu√°rio">
                    <i class="fas fa-exchange-alt"></i>Transferir
                </button>
                <button class="action-btn default" onclick="openConvertModal()" title="Converter golds para reais ou vice-versa">
                    <i class="fas fa-sync-alt"></i>Converter
                </button>
                <button class="action-btn invest" onclick="openInvestModal()" title="Investir golds em servi√ßos">
                    <i class="fas fa-chart-line"></i>Investimento
                </button>
                <button class="action-btn crypto" onclick="openCryptoModal()" title="Gerenciar criptomoedas">
                    <i class="fas fa-coins"></i>Criptomoeda
                </button>
                <button class="action-btn bank" onclick="window.location.href='https://linkpremiado51-cmd.github.io/yshippcommerce/bancocentral.html'" title="Acessar o Banco Central">
                    <i class="fas fa-university"></i>Banco Central
                </button>
                <button class="action-btn commercial" onclick="openCommercialModal()" title="Acessar conta comercial">
                    <i class="fas fa-briefcase"></i>Conta Comercial
                </button>
            </div>
        </section>
        <section class="wallet-section stats">
            <h2><i class="fas fa-chart-bar"></i>Estat√≠sticas</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-label">Total Recebido</div>
                    <div id="total-received" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Total Enviado</div>
                    <div id="total-sent" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Transa√ß√µes</div>
                    <div id="total-transactions" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">√öltimo Saque</div>
                    <div id="last-withdrawal" class="stat-value">-</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Perfil Empresarial</div>
                    <div id="enterprise-profile" class="stat-value">0 Golds</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Perfil Pessoal</div>
                    <div id="personal-profile" class="stat-value">0 Golds</div>
                </div>
            </div>
        </section>
        <section class="wallet-section investments">
            <h2><i class="fas fa-hand-holding-usd"></i>Meus Investimentos Ativos</h2>
            <div style="display: grid; grid-template-columns: 1fr; gap: 0.75rem;">
                <div id="investment-summary-list" class="transaction-list" style="max-height: none; overflow-y: visible; margin-top: 0;">
                    <div style="text-align:center; color:var(--text-secondary); padding:1rem">Nenhum investimento ativo.</div>
                </div>
            </div>
        </section>
        <section class="wallet-section transactions">
            <h2><i class="fas fa-history"></i>Hist√≥rico de Transa√ß√µes</h2>
            <div class="transaction-filters">
                <select id="filter-type" onchange="renderTransactions()">
                    <option value="">Todos os Tipos</option>
                    <option value="deposit">Dep√≥sito</option>
                    <option value="withdraw">Saque</option>
                    <option value="send">Transfer√™ncia Enviada</option>
                    <option value="receive">Transfer√™ncia Recebida</option>
                    <option value="conversion">Convers√£o</option>
                    <option value="invest">Investimento</option>
                    <option value="withdraw_invest">Retirada Investimento</option>
                </select>
                <select id="filter-currency" onchange="renderTransactions()">
                    <option value="">Todas as Moedas</option>
                    <option value="reais">Reais (R$)</option>
                    <option value="golds">Golds</option>
                </select>
                <div class="sort-options">
                    <button class="sort-btn" onclick="toggleSortOrder('date')" id="sort-date-btn">Data <i class="fas fa-sort"></i></button>
                    <button class="sort-btn" onclick="toggleSortOrder('amount')" id="sort-amount-btn">Valor <i class="fas fa-sort"></i></button>
                </div>
            </div>
            <div id="transaction-list" class="transaction-list">
                <div style="text-align:center; color:var(--text-secondary); padding:1rem">Carregando transa√ß√µes...</div>
            </div>
        </section>
    </main>
    <!-- Modais -->
    <div id="transactionDetailsModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-info-circle"></i>Detalhes da Transa√ß√£o</h3>
            <div id="transaction-details-content" style="font-size: 0.9rem; color: var(--text-primary);"></div>
            <div class="modal-buttons">
                <button class="action-btn default" onclick="closeModal('transactionDetailsModal')">Fechar</button>
            </div>
        </div>
    </div>
    <div id="investmentDetailsModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-chart-line"></i>Detalhes do Investimento</h3>
            <div id="investment-details-content" style="font-size: 0.9rem; color: var(--text-primary);"></div>
            <div class="modal-buttons">
                <button class="action-btn default" onclick="closeModal('investmentDetailsModal')">Fechar</button>
            </div>
        </div>
    </div>
    <div id="profitWithdrawalModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-coins"></i>Resgatar Lucro</h3>
            <div id="profit-withdrawal-content" style="font-size: 0.9rem; color: var(--text-primary);"></div>
            <div class="modal-buttons">
                <button class="action-btn resgate" onclick="confirmProfitWithdrawal()">Confirmar Resgate</button>
                <button class="action-btn default" onclick="closeModal('profitWithdrawalModal')">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-arrow-down"></i>Depositar</h3>
            <div class="form-group">
                <label>M√©todo</label>
                <select id="deposit-method" onchange="updateDepositMethodInfo()">
                    <option value="pix">PIX</option>
                    <option value="boleto">Boleto</option>
                    <option value="card">Cart√£o</option>
                </select>
            </div>
            <div class="form-group">
                <label>Valor (R$)</label>
                <input id="deposit-amount" type="text" placeholder="0,00" oninput="updateDepositPreview()">
                <div class="value-preview" id="deposit-preview">Valor l√≠quido ap√≥s taxa: R$ 0,00</div>
            </div>
            <div id="pix-key-group" class="form-group">
                <label for="deposit-pix-key">Chave PIX de Origem (Para valida√ß√£o)</label>
                <input id="deposit-pix-key" type="text" placeholder="CPF, e-mail, telefone ou aleat√≥ria">
                <div id="deposit-pix-key-error" class="validation-error" style="display:none;"></div>
            </div>
            <div id="deposit-method-info" class="investment-detail" style="font-size:0.8rem; margin-top:0.5rem;">
                <p><strong>Instru√ß√µes PIX:</strong> Utilize a chave PIX acima para depositar. O valor ser√° creditado em Reais na sua carteira.</p>
            </div>
            <div class="modal-buttons">
                <button class="action-btn default" id="deposit-confirm-btn" onclick="processDeposit()">
                    Confirmar
                    <div class="action-loading-overlay" id="deposit-loading"><i class="fas fa-spinner fa-spin"></i> Processando...</div>
                </button>
                <button class="action-btn" onclick="closeModal('depositModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-arrow-up"></i>Saque</h3>
            <div class="form-group">
                <label>Moeda</label>
                <select id="withdraw-currency" onchange="togglePixKeyField()">
                    <option value="reais">Reais</option>
                    <option value="golds">Golds</option>
                </select>
            </div>
            <div class="form-group">
                <label>Valor</label>
                <input id="withdraw-amount" type="text" placeholder="0,00" oninput="updateWithdrawPreview()">
                <div class="value-preview" id="withdraw-preview">Valor l√≠quido ap√≥s taxa: R$ 0,00</div>
            </div>
            <div id="withdraw-pix-group" class="form-group" style="display:block;">
                <label for="withdraw-pix-key">Chave PIX (destino)</label>
                <input id="withdraw-pix-key" type="text" placeholder="CPF, e-mail, telefone ou aleat√≥ria">
                <div id="withdraw-pix-key-error" class="validation-error" style="display:none;"></div>
            </div>
            <div class="modal-buttons">
                <button class="action-btn withdraw" id="withdraw-confirm-btn" onclick="confirmWithdrawal()">
                    Solicitar Saque
                    <div class="action-loading-overlay" id="withdraw-loading"><i class="fas fa-spinner fa-spin"></i> Solicitando...</div>
                </button>
                <button class="action-btn" onclick="closeModal('withdrawModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="transferModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-exchange-alt"></i>Transferir</h3>
            <div class="form-group">
                <label>ID do destinat√°rio</label>
                <input id="recipient-id" type="text">
            </div>
            <div class="form-group">
                <label>Moeda</label>
                <select id="transfer-currency">
                    <option value="golds">Golds</option>
                    <option value="reais">Reais</option>
                </select>
            </div>
            <div class="form-group">
                <label>Valor</label>
                <input id="transfer-amount" type="text" placeholder="0,00" oninput="updateTransferPreview()">
                <div class="value-preview" id="transfer-preview">Valor l√≠quido ap√≥s taxa: 0 Golds</div>
            </div>
            <div class="modal-buttons">
                <button class="action-btn transfer" id="transfer-confirm-btn" onclick="confirmTransfer()">
                    Enviar
                    <div class="action-loading-overlay" id="transfer-loading"><i class="fas fa-spinner fa-spin"></i> Enviando...</div>
                </button>
                <button class="action-btn" onclick="closeModal('transferModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="convertModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-sync-alt"></i>Converter</h3>
            <div class="form-group">
                <label>Converter</label>
                <select id="convert-from" onchange="updateConversionPreview()">
                    <option value="golds">Golds</option>
                    <option value="reais">Reais</option>
                </select>
            </div>
            <div class="form-group">
                <label>Valor</label>
                <input id="convert-amount" type="text" placeholder="0,00" oninput="updateConversionPreview()">
            </div>
            <div class="form-group">
                <label>Para</label>
                <select id="convert-to" onchange="updateConversionPreview()">
                    <option value="reais">Reais</option>
                    <option value="golds">Golds</option>
                </select>
            </div>
            <div class="form-group">
                <label>Valor Convertido (Estimativa)</label>
                <div id="conversion-preview" style="padding: 0.5rem; border: 1px solid var(--border); border-radius: 0px; background: var(--background);">0</div>
            </div>
            <div class="modal-buttons">
                <button class="action-btn default" id="convert-confirm-btn" onclick="processConversion()">
                    Confirmar Convers√£o
                    <div class="action-loading-overlay" id="convert-loading"><i class="fas fa-spinner fa-spin"></i> Convertendo...</div>
                </button>
                <button class="action-btn" onclick="closeModal('convertModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="investModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-chart-line"></i>Investir em Servi√ßos</h3>
            <div class="form-group">
                <label for="invest-company">Empresa / Servi√ßo</label>
                <select id="invest-company" onchange="renderInvestmentDetails()"></select>
            </div>
            <div id="investment-details" class="investment-detail">
                Selecione um plano para ver detalhes.
            </div>
            <div class="form-group">
                <label for="invest-amount">Quantidade de Golds</label>
                <input id="invest-amount" type="text" placeholder="0" oninput="renderInvestmentDetails()">
            </div>
            <div id="estimated-return" class="estimated-return"></div>
            <div class="modal-buttons">
                <button class="action-btn invest" id="invest-confirm-btn" onclick="processInvest()">
                    Confirmar Investimento
                    <div class="action-loading-overlay" id="invest-loading"><i class="fas fa-spinner fa-spin"></i> Investindo...</div>
                </button>
                <button class="action-btn default" onclick="viewCompany()">
                    <i class="fas fa-building"></i> Ver Empresa
                </button>
                <button class="action-btn withdraw" onclick="openWithdrawInvestmentModal()">Retirar Investimento</button>
                <button class="action-btn" onclick="closeModal('investModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="withdrawInvestModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-sign-out-alt"></i>Retirar Investimento</h3>
            <div class="form-group">
                <label for="withdraw-invest-company">Empresa</label>
                <select id="withdraw-invest-company" onchange="renderWithdrawalDetails()"></select>
            </div>
            <div id="withdrawal-details" class="investment-detail">
                Selecione um investimento ativo.
            </div>
            <div class="form-group">
                <label for="withdraw-invest-amount">Quantidade de Golds a Retirar</label>
                <input id="withdraw-invest-amount" type="text" placeholder="0" oninput="renderWithdrawalDetails()">
            </div>
            <div id="final-withdrawal-summary" class="estimated-return" style="color: var(--accent);"></div>
            <div class="modal-buttons">
                <button class="action-btn withdraw" id="withdraw-invest-confirm-btn" onclick="confirmWithdrawalInvestment()">
                    Confirmar Retirada
                    <div class="action-loading-overlay" id="withdraw-invest-loading"><i class="fas fa-spinner fa-spin"></i> Retirando...</div>
                </button>
                <button class="action-btn" onclick="closeModal('withdrawInvestModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="cryptoModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-coins"></i>Criptomoeda</h3>
            <p style="color:var(--text-secondary); font-size:0.85rem">Funcionalidade de criptomoeda em desenvolvimento.</p>
            <div class="modal-buttons">
                <button class="action-btn default" onclick="closeModal('cryptoModal')">Fechar</button>
            </div>
        </div>
    </div>
    <div id="commercialModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-briefcase"></i>Conta Comercial</h3>
            <p style="color:var(--text-secondary); font-size:0.85rem">Funcionalidade de Conta Comercial em desenvolvimento.</p>
            <div class="modal-buttons">
                <button class="action-btn default" onclick="closeModal('commercialModal')">Fechar</button>
            </div>
        </div>
    </div>
    <div id="notificationModal" class="modal">
        <div class="modal-content">
            <h3 id="notification-title"><i class="fas fa-bell"></i>Notifica√ß√£o</h3>
            <p id="notification-message" style="color:var(--text-secondary); font-size:0.85rem"></p>
            <div class="modal-buttons">
                <button class="action-btn default" onclick="closeModal('notificationModal')">OK</button>
            </div>
        </div>
    </div>
    <div id="levelModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-trophy"></i>N√≠veis e Benef√≠cios</h3>
            <div id="level-modal-content" style="font-size: 0.9rem; color: var(--text-primary);"></div>
            <div class="modal-buttons">
                <button class="action-btn default" onclick="closeModal('levelModal')">Fechar</button>
            </div>
        </div>
    </div>
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <h3 id="confirmation-title"><i class="fas fa-question-circle"></i>Confirma√ß√£o</h3>
            <p id="confirmation-message" style="color:var(--text-secondary); font-size:0.85rem"></p>
            <div class="modal-buttons">
                <button class="action-btn default" id="confirmation-confirm-btn" onclick="executeConfirmedAction()">Confirmar</button>
                <button class="action-btn" onclick="closeModal('confirmationModal')" style="background:white; color:var(--text-primary); border:1px solid var(--border)">Cancelar</button>
            </div>
        </div>
    </div>
    <footer id="userInfoFooter">Usu√°rio: <span id="footerUserName">Carregando...</span> | ID: <span id="footerUserId">---</span></footer>
</body>
    </html>
